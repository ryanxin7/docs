<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DQL 查询语句与元数据 | Ryan’s Notebook</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="潇洒坦荡，干净纯良">
    <link rel="preload" href="/assets/css/0.styles.6734c428.css" as="style"><link rel="preload" href="/assets/js/app.211d752d.js" as="script"><link rel="preload" href="/assets/js/5.c313c3d0.js" as="script"><link rel="preload" href="/assets/js/2.de429ac0.js" as="script"><link rel="preload" href="/assets/js/21.ccdd5e63.js" as="script"><link rel="prefetch" href="/assets/js/10.8196b70d.js"><link rel="prefetch" href="/assets/js/11.9dff149b.js"><link rel="prefetch" href="/assets/js/12.46c071d6.js"><link rel="prefetch" href="/assets/js/13.d20776a1.js"><link rel="prefetch" href="/assets/js/14.961461dd.js"><link rel="prefetch" href="/assets/js/15.2bffdb7f.js"><link rel="prefetch" href="/assets/js/16.3fa428b3.js"><link rel="prefetch" href="/assets/js/17.be61de80.js"><link rel="prefetch" href="/assets/js/18.069d9212.js"><link rel="prefetch" href="/assets/js/19.b10de245.js"><link rel="prefetch" href="/assets/js/20.45447c45.js"><link rel="prefetch" href="/assets/js/22.1644cb9c.js"><link rel="prefetch" href="/assets/js/23.764ddc3f.js"><link rel="prefetch" href="/assets/js/24.4b8dde58.js"><link rel="prefetch" href="/assets/js/25.c7f51c5b.js"><link rel="prefetch" href="/assets/js/26.94297ef9.js"><link rel="prefetch" href="/assets/js/27.80c99465.js"><link rel="prefetch" href="/assets/js/28.cceb2a53.js"><link rel="prefetch" href="/assets/js/29.c711455d.js"><link rel="prefetch" href="/assets/js/3.1da7ea23.js"><link rel="prefetch" href="/assets/js/30.c8257e19.js"><link rel="prefetch" href="/assets/js/31.62a3b299.js"><link rel="prefetch" href="/assets/js/32.ec153267.js"><link rel="prefetch" href="/assets/js/33.6483d3b9.js"><link rel="prefetch" href="/assets/js/34.1bce5f6d.js"><link rel="prefetch" href="/assets/js/35.f8821ed1.js"><link rel="prefetch" href="/assets/js/36.e9aec511.js"><link rel="prefetch" href="/assets/js/37.d83a0e06.js"><link rel="prefetch" href="/assets/js/38.be8dde71.js"><link rel="prefetch" href="/assets/js/39.5591d7ac.js"><link rel="prefetch" href="/assets/js/4.19b9dee6.js"><link rel="prefetch" href="/assets/js/40.2ebc531b.js"><link rel="prefetch" href="/assets/js/41.3aa2453c.js"><link rel="prefetch" href="/assets/js/42.f91bddac.js"><link rel="prefetch" href="/assets/js/43.249d4b48.js"><link rel="prefetch" href="/assets/js/6.eb0e1074.js"><link rel="prefetch" href="/assets/js/7.1fda2a8c.js"><link rel="prefetch" href="/assets/js/8.bbe1a929.js"><link rel="prefetch" href="/assets/js/9.fccb5cf8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6734c428.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ryan’s Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux 课程笔记
</a></div><div class="nav-item"><a href="/dba/" class="nav-link router-link-active">
  DBA 课程笔记
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link">
  私有云技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker&amp;K8S" class="dropdown-title"><span class="title">Docker&amp;K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/container/docker/" class="nav-link">
  初级入门篇
</a></li><li class="dropdown-item"><!----> <a href="/container/kubernetes/" class="nav-link">
  中高进阶篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具箱" class="dropdown-title"><span class="title">实用工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          静态素材
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unsplash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.pexels.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pexels
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://coolsymbol.com/emojis/emoji-for-copy-and-paste.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Emoji
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.easyicon.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Icon
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          虚拟主机
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          域名注册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.namecheap.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Namecheap
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.freenom.com/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Freenom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.cloudflare.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloudflare
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux 课程笔记
</a></div><div class="nav-item"><a href="/dba/" class="nav-link router-link-active">
  DBA 课程笔记
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link">
  私有云技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker&amp;K8S" class="dropdown-title"><span class="title">Docker&amp;K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/container/docker/" class="nav-link">
  初级入门篇
</a></li><li class="dropdown-item"><!----> <a href="/container/kubernetes/" class="nav-link">
  中高进阶篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具箱" class="dropdown-title"><span class="title">实用工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          静态素材
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unsplash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.pexels.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pexels
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://coolsymbol.com/emojis/emoji-for-copy-and-paste.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Emoji
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.easyicon.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Icon
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          虚拟主机
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          域名注册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.namecheap.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Namecheap
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.freenom.com/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Freenom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.cloudflare.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloudflare
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第一章 MySQL简介及安装</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第二章 体系结构及管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>第三章 SQL基础应用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dba/notes/dba03.html" class="sidebar-link">SQL 基本概念引入</a></li><li><a href="/dba/notes/dba03-1.html" class="sidebar-link">DDL 语句的应用</a></li><li><a href="/dba/notes/dba03-2.html" class="active sidebar-link">DQL 查询语句与元数据</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_1-dql-介绍" class="sidebar-link">1. DQL 介绍</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-select-语句的应用" class="sidebar-link">2. Select 语句的应用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-1-select-单独使用的情况" class="sidebar-link">2.1 select 单独使用的情况</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-2-select查询语句通用语法-单表操作" class="sidebar-link">2.2 select查询语句通用语法 (单表操作)</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-3-学习环境所用的数据库文件" class="sidebar-link">2.3 学习环境所用的数据库文件</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-4-select-配合-from-子句使用" class="sidebar-link">2.4 SELECT 配合 FROM 子句使用</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-5-select-配合-where-子句使用" class="sidebar-link">2.5 SELECT 配合 WHERE 子句使用</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-6-select-配合-group-by-聚合参数应用" class="sidebar-link">2.6 SELECT 配合 GROUP BY + 聚合参数应用</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-7-select-配合having应用" class="sidebar-link">2.7 SELECT 配合HAVING应用</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-8-select-配合-order-by-子句" class="sidebar-link">2.8 SELECT 配合 ORDER BY 子句</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-9-select-配合-limit-子句" class="sidebar-link">2.9 SELECT 配合 LIMIT 子句</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-10-练习题" class="sidebar-link">2.10 练习题</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-11-小结-子句执行逻辑" class="sidebar-link">2.11 小结 子句执行逻辑</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_2-12-union-和-union-all-sql改写" class="sidebar-link">2.12 union 和 union all  SQL改写</a></li></ul></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_3-多表连接查询-内连接" class="sidebar-link">3.多表连接查询(内连接)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_3-1-作用引入" class="sidebar-link">3.1 作用引入</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_3-2-多表连接基本语法要求" class="sidebar-link">3.2 多表连接基本语法要求</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_3-3-多表连接查询例题-（学生管理系统）" class="sidebar-link">3.3  多表连接查询例题 （学生管理系统）</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba03-2.html#_3-4-多表连接举例说明" class="sidebar-link">3.4 多表连接举例说明</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第四章 索引及执行计划</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第五章 存储引擎</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dql-查询语句与元数据"><a href="#dql-查询语句与元数据" class="header-anchor">#</a> DQL 查询语句与元数据</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-dql-介绍">1. DQL 介绍</a></li><li><a href="#_2-select-语句的应用">2. Select 语句的应用</a><ul><li><a href="#_2-1-select-单独使用的情况">2.1 select 单独使用的情况</a></li><li><a href="#_2-2-select查询语句通用语法-单表操作">2.2 select查询语句通用语法 (单表操作)</a></li><li><a href="#_2-3-学习环境所用的数据库文件">2.3 学习环境所用的数据库文件</a></li><li><a href="#_2-4-select-配合-from-子句使用">2.4 SELECT 配合 FROM 子句使用</a></li><li><a href="#_2-5-select-配合-where-子句使用">2.5 SELECT 配合 WHERE 子句使用</a></li><li><a href="#_2-6-select-配合-group-by-聚合参数应用">2.6 SELECT 配合 GROUP BY + 聚合参数应用</a></li><li><a href="#_2-7-select-配合having应用">2.7 SELECT 配合HAVING应用</a></li><li><a href="#_2-8-select-配合-order-by-子句">2.8 SELECT 配合 ORDER BY 子句</a></li><li><a href="#_2-9-select-配合-limit-子句">2.9 SELECT 配合 LIMIT 子句</a></li><li><a href="#_2-10-练习题">2.10 练习题</a></li><li><a href="#_2-11-小结-子句执行逻辑">2.11 小结 子句执行逻辑</a></li><li><a href="#_2-12-union-和-union-all-sql改写">2.12 union 和 union all  SQL改写</a></li></ul></li><li><a href="#_3-多表连接查询-内连接">3.多表连接查询(内连接)</a><ul><li><a href="#_3-1-作用引入">3.1 作用引入</a></li><li><a href="#_3-2-多表连接基本语法要求">3.2 多表连接基本语法要求</a></li><li><a href="#_3-3-多表连接查询例题-（学生管理系统）">3.3  多表连接查询例题 （学生管理系统）</a></li><li><a href="#_3-4-多表连接举例说明">3.4 多表连接举例说明</a></li></ul></li></ul></div><p></p> <h2 id="_1-dql-介绍"><a href="#_1-dql-介绍" class="header-anchor">#</a> <strong>1. DQL 介绍</strong></h2> <br> <p>主要对应操作：</p> <ul><li><strong>select 语句</strong></li> <li><strong>show 元数据属性</strong></li></ul> <br> <h2 id="_2-select-语句的应用"><a href="#_2-select-语句的应用" class="header-anchor">#</a> 2. Select 语句的应用</h2> <br> <h3 id="_2-1-select-单独使用的情况"><a href="#_2-1-select-单独使用的情况" class="header-anchor">#</a> 2.1 select 单独使用的情况</h3> <br> <p><strong>查看系统参数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> @<span class="token variable">@basedir</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> @<span class="token variable">@port</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> @<span class="token variable">@innodb_flush_log_at_trx_commit</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'innodb%'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div> <br> <br> <h3 id="_2-2-select查询语句通用语法-单表操作"><a href="#_2-2-select查询语句通用语法-单表操作" class="header-anchor">#</a> 2.2 select查询语句通用语法 (单表操作)</h3> <br> <p><strong>查询语句 顺序不能打乱</strong></p> <ol><li>select 列</li> <li>from 表</li> <li>where 条件</li> <li>group by 条件</li> <li>having  条件</li> <li>order by 条件</li> <li>limit</li></ol> <br> <br> <h3 id="_2-3-学习环境所用的数据库文件"><a href="#_2-3-学习环境所用的数据库文件" class="header-anchor">#</a> 2.3 学习环境所用的数据库文件</h3> <br> <ul><li>world   数据库</li> <li>city          城市表</li> <li>country     国家表</li> <li>countrylanguage 国家的语言</li></ul> <br> <p><strong>city 表的结构</strong></p> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">desc</span> city<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> Field    <span class="token operator">|</span> <span class="token keyword">Type</span>   <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+------+-----+---------+----------------+</span>
<span class="token operator">|</span> ID     <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>  <span class="token operator">|</span> PRI <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span> <span class="token keyword">auto_increment</span> <span class="token operator">|</span>
<span class="token operator">|</span> Name    <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>  <span class="token operator">|</span>   <span class="token operator">|</span>     <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> CountryCode <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>  <span class="token operator">|</span> MUL <span class="token operator">|</span>     <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> District  <span class="token operator">|</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>  <span class="token operator">|</span>   <span class="token operator">|</span>     <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">|</span> Population <span class="token operator">|</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token keyword">NO</span>  <span class="token operator">|</span>   <span class="token operator">|</span> <span class="token number">0</span>    <span class="token operator">|</span>        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+----------+------+-----+---------+----------------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><br> <br> <p><strong>相关列名字</strong></p> <br> <ul><li>ID         : 城市序号(1-...)</li> <li>name        : 城市名字</li> <li>countrycode    : 国家代码,例如:CHN,USA</li> <li>district  :         区域  中国 省 美国 洲</li> <li>population :    人口数</li></ul> <br> <br> <div class="custom-block tip"><p class="custom-block-title">工作中如何熟悉数据库业务?</p> <ul><li><p>快速和研发人员打好关系</p></li> <li><p>找到领导要ER图</p></li> <li><p>查看建表语句<code>DESC ,show create table</code></p></li> <li><p>查询表的全部数据前五行数据 <code>select * from city limit 5;</code></p></li></ul></div> <br> <br> <h3 id="_2-4-select-配合-from-子句使用"><a href="#_2-4-select-配合-from-子句使用" class="header-anchor">#</a> 2.4 SELECT <strong>配合</strong> <strong>FROM</strong> 子句使用</h3> <br> <p><strong>语法：</strong> <strong>select 条件列 from 表</strong></p> <p>例子:</p> <ol><li><strong>查询表中所有的信息(生产中几乎是没有这种需求的)</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">USE</span> world <span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>NAME <span class="token punctuation">,</span>countrycode <span class="token punctuation">,</span>district<span class="token punctuation">,</span>population  <span class="token keyword">FROM</span> city<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>或者:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>  <span class="token keyword">FROM</span> city<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div> <br> <br> <ol start="2"><li><strong>查询表中 name 和population 列的值</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME <span class="token punctuation">,</span>population  <span class="token keyword">FROM</span> city<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div> <br> <br> <h3 id="_2-5-select-配合-where-子句使用"><a href="#_2-5-select-配合-where-子句使用" class="header-anchor">#</a> 2.5 SELECT <strong>配合</strong> WHERE 子句使用</h3> <br> <p><strong>语法：</strong> <strong>select 条件列 from 表 where 过滤条件</strong></p> <br> <p><strong>使用情况一：where等值条件查询类似 grep 过滤具体字符串</strong></p> <p><strong>例子:</strong></p> <p><strong>1.查询中国所有的城市名和人口数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div> <br> <br> <p><strong>使用情况二： where 配合比较判断查询(&gt; &lt; &gt;= &lt;=)</strong></p> <p><strong>例子:</strong></p> <ol><li><strong>世界上小于100人的城市名和人口数</strong></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> population<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div> <br> <br> <p><strong>使用情况三：  where 配合 逻辑连接符 (and or)   与或非</strong></p> <p><strong>例子:</strong></p> <p><strong>1.</strong> <strong>查询中国人口数量大于1000w的城市名和人口</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span> <span class="token operator">AND</span> population<span class="token operator">&gt;</span><span class="token number">8000000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div> <br> <p><strong>2.</strong> <strong>查询中国或美国的城市名和人口数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span> <span class="token operator">OR</span> countrycode<span class="token operator">=</span><span class="token string">'USA'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3.</strong> <strong>查询人口数量在500w到600w之间的城市名和人口数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> population<span class="token operator">&gt;</span><span class="token number">5000000</span> <span class="token operator">AND</span> population<span class="token operator">&lt;</span><span class="token number">6000000</span><span class="token punctuation">;</span> 
或者:
<span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> population <span class="token operator">BETWEEN</span> <span class="token number">5000000</span> <span class="token operator">AND</span> <span class="token number">6000000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div> <br> <br> <p><strong>使用情况三：where 配合 like子句 模糊查询</strong></p> <p><strong>例子:</strong></p> <p><strong>1. 查询一下contrycode中带有CH开头,城市信息</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode <span class="token operator">LIKE</span> <span class="token string">'CH%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><br><br></p> <p><strong>注意:不要出现类似于 %CH%,前后都有百分号的语句,因为不走索引,性能极差<br></strong></p> <p><strong>如果业务中有大量需求,我们用&quot;ES&quot;来替代</strong></p> <br> <p><strong>使用情况四：where 配合 in语句</strong></p> <p><strong>例子:</strong></p> <p><strong>1. 查询中国或美国的城市信息</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span> <span class="token operator">OR</span> countrycode<span class="token operator">=</span><span class="token string">'USA'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>或者:</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'CHN'</span> <span class="token punctuation">,</span><span class="token string">'USA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br> <br> <h3 id="_2-6-select-配合-group-by-聚合参数应用"><a href="#_2-6-select-配合-group-by-聚合参数应用" class="header-anchor">#</a> <strong>2.6 SELECT 配合 GROUP BY + 聚合参数应用</strong></h3> <br> <p><strong>2.6.1 常用聚合函数介绍</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token function">MAX</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">MIN</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">SUM</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> GROUP_CONCAT<span class="token punctuation">(</span> <span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <p><strong>2.6.2 GROUP BY  生产中使用较多</strong></p> <p><strong>将某列中有共同条件的数据行,分成一组,然后在进行聚合函数操作.类似AWK中的数组</strong></p> <br> <p>例子:</p> <p><strong>1. 统计每个国家,城市的个数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> countrycode <span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> countrycode<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="\img\dba\Section3-3-1.png" alt="统计每个国家,城市的个数" width="85%" height="85%"> <br> <br> <p><strong>2. 统计每个国家的总人口数.</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> countrycode<span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> countrycode<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="\img\dba\Section3-3-2.png" alt=" 统计每个国家的总人口数" width="85%" height="85%"> <br> <br> <p><strong>3. 统计每个国家省的个数</strong></p> <br> <p><strong>DISTINCT 去重 把重复省名字去重</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> countrycode<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> district<span class="token punctuation">)</span>   <span class="token keyword">FROM</span> city
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> countrycode<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="\img\dba\Section3-3-3.png" alt=" DISTINCT 去重" width="85%" height="85%"> <br> <br> <p><strong>4.</strong> <strong>统计中国 每个省的总人口数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> district<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span>   <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <br> <p><strong>5.</strong> <strong>统计中国 每个省城市的个数</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> district<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>NAME<span class="token punctuation">)</span>   <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div> <br> <br> <p><strong>6.</strong> <strong>统计中国 每个省城市的名字列表</strong></p> <p>语法：<strong>GROUP_CONCAT()</strong></p> <p>如：guangdong  guangzhou,shenzhen,foshan.... 不统计  把列转成一行显示</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> district<span class="token punctuation">,</span> GROUP_CONCAT<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span>   <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img src="\img\dba\Section3-3-4.png" alt="把列转成一行显示" width="85%" height="85%"> <br> <br> <p><strong>7.</strong> <strong>小扩展</strong></p> <p><strong>把结果拼成一行</strong> <br></p> <p><strong>格式：</strong> anhui : hefei,huaian ....<br>
concat 拼接</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> CONCAT<span class="token punctuation">(</span>district<span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span> <span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>NAME<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img src="\img\dba\Section3-3-5.png" alt="把结果拼成一行" width="85%" height="85%"> <br> <br> <h3 id="_2-7-select-配合having应用"><a href="#_2-7-select-配合having应用" class="header-anchor">#</a> <strong>2.7 SELECT 配合HAVING应用</strong></h3> <p><strong>例子：</strong></p> <ol><li><strong>统计所有国家的总人口数量，将总人口数量大于1亿的过滤出来</strong></li></ol> <img src="\img\dba\Section3-3-6.png" alt="把结果拼成一行" width="85%" height="85%"> <p>SUM函数操作 在Group by 之后操作，所以不能使用where</p> <p>所以只能在Group by 做完分组聚合 后再做条件查询、判断、过滤时需要使用 HAVING 子句（HAVING不走索引的对性能有影响）</p> <img src="\img\dba\Section3-3-7.png" alt="把结果拼成一行" width="85%" height="85%"> <br> <br> <h3 id="_2-8-select-配合-order-by-子句"><a href="#_2-8-select-配合-order-by-子句" class="header-anchor">#</a> 2.8 SELECT 配合 ORDER BY 子句</h3> <br> <p><strong>例子:</strong></p> <p><strong>1.</strong> <strong>统计所有国家的总人口数量,将总人口数大于5000w的过滤出来,并且按照从大到小顺序排列</strong></p> <p><code>GROUP BY</code> 执行完 <code>SUM ORDER BY SUM</code> 才能执行</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> countrycode<span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> countrycode
<span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">50000000</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">DESC</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div> <br> <br> <h3 id="_2-9-select-配合-limit-子句"><a href="#_2-9-select-配合-limit-子句" class="header-anchor">#</a> 2.9 SELECT 配合 LIMIT 子句</h3> <br> <p><strong>例子:</strong></p> <p><strong>1.</strong> 统计所有国家的总人口数量</p> <p><strong>将总人口数大于5000w的过滤出来</strong></p> <p><strong>并且按照从大到小顺序排列只显示前三名</strong> <strong>（分页显示）</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> countrycode<span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> countrycode
<span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">50000000</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span> <span class="token number">3</span> <span class="token keyword">OFFSET</span> <span class="token number">0</span><span class="token punctuation">;</span>
 
<span class="token comment">--显示4-6行</span>
 
<span class="token keyword">SELECT</span> countrycode<span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> countrycode
<span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">50000000</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span> <span class="token number">3</span> <span class="token keyword">OFFSET</span> <span class="token number">3</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>LIMIT M,N   :跳过M行,显示一共N行</strong></p> <p><strong>LIMIT Y OFFSET X:跳过X行,显示一共Y行</strong></p> <br> <br> <h3 id="_2-10-练习题"><a href="#_2-10-练习题" class="header-anchor">#</a> <strong>2.10 练习题</strong></h3> <br> <p><strong>1.统计中国每个省的总人口数，只打印总人口数小于100w的</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  district <span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district
<span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">1000000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><img src="\img\dba\Section3-3-8.png" alt="LX1" width="85%" height="85%"> <br> <br> <p><strong>2.</strong> <strong>查看中国所有的城市，并按人口数进行排序(从大到小)</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>SELECT * FROM city WHERE countrycode='CHN' 
ORDER BY population DESC;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="\img\dba\Section3-3-9.png" alt="LX1" width="85%" height="85%"> <br> <br> <p><strong>3.</strong> <strong>统计中国各个省的总人口数量，按照总人口从大到小排序</strong></p> <br> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  district <span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">DESC</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div> <br> <p><strong>4.</strong> <strong>统计中国,每个省的总人口,找出总人口大于500w的,</strong></p> <p>并按总人口从大到小排序,只显示前三名</p> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span>  district <span class="token punctuation">,</span><span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">FROM</span> city 
<span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> district
<span class="token keyword">HAVING</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">5000000</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">DESC</span> 
<span class="token keyword">LIMIT</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div> <br> <br> <h3 id="_2-11-小结-子句执行逻辑"><a href="#_2-11-小结-子句执行逻辑" class="header-anchor">#</a> <strong>2.11</strong> <strong>小结 子句执行逻辑</strong></h3> <br> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> 列， <span class="token keyword">from</span> t1 
<span class="token keyword">select</span> disctrict <span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span>  city   先调用表
<span class="token keyword">where</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>  根据<span class="token keyword">where</span>条件过滤 CHN的国家
<span class="token keyword">group</span> <span class="token keyword">by</span> district      数组数省份出现次数
<span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token number">10</span> 对结果集进行过滤
<span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token function">count</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">desc</span>  对以上结果进行排序
<span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">;</span> 只显示排名靠前的三位
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div> <br> <br> <p>中国前三个 拥有超过十个城市的省份</p> <img src="\img\dba\Section3-3-10.png" alt="LX1" width="85%" height="85%"> <br> <br> <h3 id="_2-12-union-和-union-all-sql改写"><a href="#_2-12-union-和-union-all-sql改写" class="header-anchor">#</a> <strong>2.12 union 和 union all  SQL改写</strong></h3> <p><strong>作用: 多个结果集合并查询的功能</strong></p> <p><strong>多个语句结果进行拼接</strong></p> <br> <p>需求: 查询中国或者美国的城市信息</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span> <span class="token operator">OR</span> countrycode<span class="token operator">=</span><span class="token string">'USA'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div> <br> <p>改写为: 性能比改写前性能高</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'CHN'</span>
<span class="token keyword">UNION</span> <span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> countrycode<span class="token operator">=</span><span class="token string">'USA'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div> <br> <br> <p><strong>面试题: union 和 union all 的区别</strong> <strong>?</strong></p> <ul><li>union all  不做去重复</li> <li>union       会做去重操作</li></ul> <br> <br> <h2 id="_3-多表连接查询-内连接"><a href="#_3-多表连接查询-内连接" class="header-anchor">#</a> 3.多表连接查询(内连接)</h2> <br> <h3 id="_3-1-作用引入"><a href="#_3-1-作用引入" class="header-anchor">#</a> 3.1 作用引入</h3> <p>单表数据不能满足查询需求时</p> <br> <p><strong>例子 查询世界上小于100人的城市,所在的国家名,国土面积，城市名,人口数</strong></p> <p>需要查询 city:</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> countrycode<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>population <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> population<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">--city表中只能查到国家名、人口数、国家代号</span>
PCN   Adamstown  <span class="token number">42</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>需要关联查询 country：
<code>DESC country;</code>  查看表结构</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>需要关联查询 country
<span class="token keyword">DESC</span> country<span class="token punctuation">;</span> 查看表结构
第二张表：
 
CODE 
NAME 国家名字
SurfaceArea 国土面积
 
<span class="token keyword">SELECT</span> NAME <span class="token punctuation">,</span>SurfaceArea <span class="token keyword">FROM</span> country <span class="token keyword">WHERE</span> CODE<span class="token operator">=</span><span class="token string">'PCN'</span><span class="token punctuation">;</span> country表中查询
 
Pitcairn
<span class="token number">49.00</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div> <br> <br> <h3 id="_3-2-多表连接基本语法要求"><a href="#_3-2-多表连接基本语法要求" class="header-anchor">#</a> 3.2 多表连接基本语法要求</h3> <br> <ol><li><p>最核心的是找到多张表之间的关联条件列</p></li> <li><p>列书写时，必须是：表名字.列</p></li> <li><p>所有涉及到的查询列，都放在selec后</p></li> <li><p>将所有的过滤，分组，排序等条件按顺序写在on的后面</p></li> <li><p>JOIN B ON A.X=B.Y  A和B的关联</p> <p>JOIN C ON B.m=C.n B和C 的关联</p></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 
country<span class="token punctuation">.</span>name <span class="token punctuation">,</span>
country<span class="token punctuation">.</span>SurfaceArea<span class="token punctuation">,</span>
city<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
city<span class="token punctuation">.</span>Population
<span class="token keyword">FROM</span> city
<span class="token keyword">JOIN</span> country
<span class="token keyword">ON</span> city<span class="token punctuation">.</span>CountryCode <span class="token operator">=</span> country<span class="token punctuation">.</span>code <span class="token comment">--关联列</span>
<span class="token keyword">WHERE</span> city<span class="token punctuation">.</span>population<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div> <br> <br> <h3 id="_3-3-多表连接查询例题-（学生管理系统）"><a href="#_3-3-多表连接查询例题-（学生管理系统）" class="header-anchor">#</a> 3.3  多表连接查询例题 （学生管理系统）</h3> <br> <p>数据库结构如下：</p> <div class="language-txt line-numbers-mode"><pre class="language-text"><code>student ：学生表
===============
sno：  学号
sname：学生姓名
sage： 学生年龄
ssex： 学生性别
 
teacher ：教师表
================
tno： 教师编号
tname：教师名字
 
course ：课程表
===============
cno： 课程编号
cname：课程名字
tno： 教师编号
 
score ：成绩表
==============
sno： 学号
cno： 课程编号
score：成绩
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div> <br> <p>数据库 ER 关系图：</p> <img src="\img\dba\Section3-3-11.png" alt="er1" width="85%" height="85%"> <br> <h3 id="_3-4-多表连接举例说明"><a href="#_3-4-多表连接举例说明" class="header-anchor">#</a> 3.4 多表连接举例说明</h3> <br> <p><strong>1. 统计zhang3,学习了几门课</strong></p> <p><strong>先把涉及到的表列出来</strong></p> <ul><li><p><strong>student</strong></p></li> <li><p><strong>course</strong></p> <br></li></ul> <p><strong>由于sc里面有课程编号所有只需要用到两张表就行了</strong></p> <p>​    <br></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> student<span class="token punctuation">.</span>sname<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span>cno<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> student <span class="token keyword">JOIN</span> sc       <span class="token comment">--连接sc表进行查询</span>
<span class="token keyword">ON</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno
<span class="token keyword">WHERE</span> student<span class="token punctuation">.</span>sname<span class="token operator">=</span><span class="token string">'zhang3'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>​    <br></p> <p>​    <br></p> <p><strong>2. 查询zhang3,学习的课程名称有哪些?</strong></p> <p><strong>把涉及到的表列出来</strong></p> <ul><li><strong>student</strong></li> <li><strong>sc</strong></li> <li><strong>course</strong></li></ul> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> student<span class="token punctuation">.</span>sname<span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>course<span class="token punctuation">.</span>cname<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> student
<span class="token keyword">JOIN</span> sc
<span class="token keyword">ON</span> student<span class="token punctuation">.</span>sno<span class="token operator">=</span>sc<span class="token punctuation">.</span>sno 
<span class="token keyword">JOIN</span> course
<span class="token keyword">ON</span> sc<span class="token punctuation">.</span>cno<span class="token operator">=</span>course<span class="token punctuation">.</span>cno
<span class="token keyword">WHERE</span> student<span class="token punctuation">.</span>sname<span class="token operator">=</span><span class="token string">'zhang3'</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> student<span class="token punctuation">.</span>sname<span class="token punctuation">;</span> <span class="token comment">--课程数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><img src="\img\dba\Section3-3-12.png" alt="查询zhang3,学习的课程名称有哪些?" width="85%" height="85%"> <p>结果使用一行输出 使用 <code>GROUP_CONCAT</code></p> <br> <img src="\img\dba\Section3-3-12.png" alt="结果使用一行输出" width="85%" height="85%"> <br> <br> <p>3.<strong>查询 xin 老师教的学生名和个数</strong>.</p> <ul><li>teacher</li> <li>corse</li> <li>sc</li> <li>student</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>student<span class="token punctuation">.</span>sname<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>sname<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> teacher 
<span class="token keyword">JOIN</span> course 
<span class="token keyword">ON</span> teacher<span class="token punctuation">.</span>tno<span class="token operator">=</span>course<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc
<span class="token keyword">ON</span> course<span class="token punctuation">.</span>cno<span class="token operator">=</span>sc<span class="token punctuation">.</span>cno
<span class="token keyword">JOIN</span> student
<span class="token keyword">ON</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno
<span class="token keyword">WHERE</span> teacher<span class="token punctuation">.</span>tname<span class="token operator">=</span><span class="token string">'xin'</span> <span class="token comment">--条件</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">;</span> <span class="token comment">--老师数组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div> <br> <br> <p><strong>5.</strong> <strong>每位老师所教课程的平均分,并按平均分排序</strong></p> <br> <ul><li><strong>teacker</strong></li> <li><strong>course</strong></li> <li><strong>sc</strong></li></ul> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>course<span class="token punctuation">.</span>cname，<span class="token function">AVG</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
<span class="token keyword">from</span> teacker
<span class="token keyword">join</span> course 
<span class="token keyword">on</span> teacher<span class="token punctuation">.</span>tno<span class="token operator">=</span>course<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc
<span class="token keyword">ON</span> course<span class="token punctuation">.</span>con<span class="token operator">=</span>sc<span class="token punctuation">.</span>con
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>course<span class="token punctuation">.</span>cname <span class="token comment">--把老师进行分组 ，在把课程进行分组 </span>
<span class="token comment">--如果不分那么 一个老师如果教两门课的成绩就会混在一起</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>course<span class="token punctuation">.</span>cname<span class="token punctuation">,</span><span class="token function">AVG</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> teacher 
<span class="token keyword">JOIN</span> course
<span class="token keyword">ON</span> teacher<span class="token punctuation">.</span>tno<span class="token operator">=</span>course<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc
<span class="token keyword">ON</span> course<span class="token punctuation">.</span>cno<span class="token operator">=</span>sc<span class="token punctuation">.</span>cno
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>course<span class="token punctuation">.</span>cname
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">AVG</span><span class="token punctuation">(</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div> <br> <br> <p><strong>6.查询oldguo所教的不及格的学生姓名</strong></p> <br> <ul><li><p><strong>teacher</strong></p></li> <li><p><strong>sc</strong></p></li> <li><p><strong>student</strong></p> <br></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>student<span class="token punctuation">.</span>sname<span class="token punctuation">,</span>sc<span class="token punctuation">.</span>score
<span class="token keyword">FROM</span> teacher
<span class="token keyword">JOIN</span> course
<span class="token keyword">ON</span> teacher<span class="token punctuation">.</span>tno<span class="token operator">=</span>course<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc
<span class="token keyword">ON</span> course<span class="token punctuation">.</span>cno<span class="token operator">=</span>sc<span class="token punctuation">.</span>cno
<span class="token keyword">JOIN</span> student
<span class="token keyword">ON</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno
<span class="token keyword">WHERE</span> teacher<span class="token punctuation">.</span>tname<span class="token operator">=</span><span class="token string">'xin'</span> <span class="token operator">AND</span> sc<span class="token punctuation">.</span>score<span class="token operator">&lt;</span><span class="token number">60</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div> <br> <br> <p><strong>7.查询所有老师所教学生不及格的信息(扩展)</strong></p> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> teacher<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span>student<span class="token punctuation">.</span>sname<span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span> teacher
<span class="token keyword">JOIN</span> course
<span class="token keyword">ON</span> teacher<span class="token punctuation">.</span>tno<span class="token operator">=</span>course<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc
<span class="token keyword">ON</span> course<span class="token punctuation">.</span>cno<span class="token operator">=</span>sc<span class="token punctuation">.</span>cno
<span class="token keyword">JOIN</span> student
<span class="token keyword">ON</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>student<span class="token punctuation">.</span>sno
<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>score<span class="token operator">&lt;</span><span class="token number">60</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> teacher<span class="token punctuation">.</span>tno <span class="token comment">--按老师编号分组</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div> <br> <br> <p><strong>8.别名应用</strong></p> <br> <p><strong>表别名</strong> <strong>:</strong> <strong>给表起个别名省略了表长名字语句更好读</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> t<span class="token punctuation">.</span>tname<span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span>st<span class="token punctuation">.</span>sname<span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token keyword">FROM</span> teacher <span class="token keyword">as</span> t
<span class="token keyword">JOIN</span> course <span class="token keyword">as</span> c
<span class="token keyword">ON</span> t<span class="token punctuation">.</span>tno<span class="token operator">=</span>c<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc 
<span class="token keyword">ON</span> c<span class="token punctuation">.</span>cno<span class="token operator">=</span>sc<span class="token punctuation">.</span>cno
<span class="token keyword">JOIN</span> student <span class="token keyword">as</span> st
<span class="token keyword">ON</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>st<span class="token punctuation">.</span>sno
<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>score<span class="token operator">&lt;</span><span class="token number">60</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> t<span class="token punctuation">.</span>tno
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div> <br> <p><strong>表别名是全局调用的</strong></p> <p><strong>列别名:</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> t<span class="token punctuation">.</span>tname <span class="token keyword">as</span> 讲师名 <span class="token punctuation">,</span>GROUP_CONCAT<span class="token punctuation">(</span>CONCAT<span class="token punctuation">(</span>st<span class="token punctuation">.</span>sname<span class="token punctuation">,</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">,</span>sc<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> 不及格的
<span class="token keyword">FROM</span> teacher <span class="token keyword">as</span> t
<span class="token keyword">JOIN</span> course <span class="token keyword">as</span> c
<span class="token keyword">ON</span> t<span class="token punctuation">.</span>tno<span class="token operator">=</span>c<span class="token punctuation">.</span>tno
<span class="token keyword">JOIN</span> sc 
<span class="token keyword">ON</span> c<span class="token punctuation">.</span>cno<span class="token operator">=</span>sc<span class="token punctuation">.</span>cno
<span class="token keyword">JOIN</span> student <span class="token keyword">as</span> st
<span class="token keyword">ON</span> sc<span class="token punctuation">.</span>sno<span class="token operator">=</span>st<span class="token punctuation">.</span>sno
<span class="token keyword">WHERE</span> sc<span class="token punctuation">.</span>score<span class="token operator">&lt;</span><span class="token number">60</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> t<span class="token punctuation">.</span>tno
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><img src="\img\dba\Section3-3-14.png" alt="列别名" width="85%" height="85%"> <br> <br> <p>列别名可以被 having 和 order by 调用</p> <p><strong>表别名是全局调用的</strong></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dba/notes/dba03-1.html" class="prev">
        DDL 语句的应用
      </a></span> <span class="next"><a href="/dba/notes/dba04.html">
        第三章回顾 补充元数据查询部分
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.211d752d.js" defer></script><script src="/assets/js/5.c313c3d0.js" defer></script><script src="/assets/js/2.de429ac0.js" defer></script><script src="/assets/js/21.ccdd5e63.js" defer></script>
  </body>
</html>
