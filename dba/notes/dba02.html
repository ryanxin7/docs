<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>体系结构及管理 | Ryan’s Notebook</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="/css/style.css">
    <meta name="description" content="潇洒坦荡，干净纯良">
    <link rel="preload" href="/assets/css/0.styles.6734c428.css" as="style"><link rel="preload" href="/assets/js/app.211d752d.js" as="script"><link rel="preload" href="/assets/js/5.c313c3d0.js" as="script"><link rel="preload" href="/assets/js/2.de429ac0.js" as="script"><link rel="preload" href="/assets/js/19.b10de245.js" as="script"><link rel="prefetch" href="/assets/js/10.8196b70d.js"><link rel="prefetch" href="/assets/js/11.9dff149b.js"><link rel="prefetch" href="/assets/js/12.46c071d6.js"><link rel="prefetch" href="/assets/js/13.d20776a1.js"><link rel="prefetch" href="/assets/js/14.961461dd.js"><link rel="prefetch" href="/assets/js/15.2bffdb7f.js"><link rel="prefetch" href="/assets/js/16.3fa428b3.js"><link rel="prefetch" href="/assets/js/17.be61de80.js"><link rel="prefetch" href="/assets/js/18.069d9212.js"><link rel="prefetch" href="/assets/js/20.45447c45.js"><link rel="prefetch" href="/assets/js/21.ccdd5e63.js"><link rel="prefetch" href="/assets/js/22.1644cb9c.js"><link rel="prefetch" href="/assets/js/23.764ddc3f.js"><link rel="prefetch" href="/assets/js/24.4b8dde58.js"><link rel="prefetch" href="/assets/js/25.c7f51c5b.js"><link rel="prefetch" href="/assets/js/26.94297ef9.js"><link rel="prefetch" href="/assets/js/27.80c99465.js"><link rel="prefetch" href="/assets/js/28.cceb2a53.js"><link rel="prefetch" href="/assets/js/29.c711455d.js"><link rel="prefetch" href="/assets/js/3.1da7ea23.js"><link rel="prefetch" href="/assets/js/30.c8257e19.js"><link rel="prefetch" href="/assets/js/31.62a3b299.js"><link rel="prefetch" href="/assets/js/32.ec153267.js"><link rel="prefetch" href="/assets/js/33.6483d3b9.js"><link rel="prefetch" href="/assets/js/34.1bce5f6d.js"><link rel="prefetch" href="/assets/js/35.f8821ed1.js"><link rel="prefetch" href="/assets/js/36.e9aec511.js"><link rel="prefetch" href="/assets/js/37.d83a0e06.js"><link rel="prefetch" href="/assets/js/38.be8dde71.js"><link rel="prefetch" href="/assets/js/39.5591d7ac.js"><link rel="prefetch" href="/assets/js/4.19b9dee6.js"><link rel="prefetch" href="/assets/js/40.2ebc531b.js"><link rel="prefetch" href="/assets/js/41.3aa2453c.js"><link rel="prefetch" href="/assets/js/42.f91bddac.js"><link rel="prefetch" href="/assets/js/43.249d4b48.js"><link rel="prefetch" href="/assets/js/6.eb0e1074.js"><link rel="prefetch" href="/assets/js/7.1fda2a8c.js"><link rel="prefetch" href="/assets/js/8.bbe1a929.js"><link rel="prefetch" href="/assets/js/9.fccb5cf8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6734c428.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ryan’s Notebook</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux 课程笔记
</a></div><div class="nav-item"><a href="/dba/" class="nav-link router-link-active">
  DBA 课程笔记
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link">
  私有云技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker&amp;K8S" class="dropdown-title"><span class="title">Docker&amp;K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/container/docker/" class="nav-link">
  初级入门篇
</a></li><li class="dropdown-item"><!----> <a href="/container/kubernetes/" class="nav-link">
  中高进阶篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具箱" class="dropdown-title"><span class="title">实用工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          静态素材
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unsplash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.pexels.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pexels
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://coolsymbol.com/emojis/emoji-for-copy-and-paste.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Emoji
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.easyicon.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Icon
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          虚拟主机
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          域名注册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.namecheap.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Namecheap
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.freenom.com/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Freenom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.cloudflare.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloudflare
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/linux/" class="nav-link">
  Linux 课程笔记
</a></div><div class="nav-item"><a href="/dba/" class="nav-link router-link-active">
  DBA 课程笔记
</a></div><div class="nav-item"><a href="/cloud/" class="nav-link">
  私有云技术
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Docker&amp;K8S" class="dropdown-title"><span class="title">Docker&amp;K8S</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/container/docker/" class="nav-link">
  初级入门篇
</a></li><li class="dropdown-item"><!----> <a href="/container/kubernetes/" class="nav-link">
  中高进阶篇
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实用工具箱" class="dropdown-title"><span class="title">实用工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          静态素材
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Unsplash
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.pexels.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Pexels
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://coolsymbol.com/emojis/emoji-for-copy-and-paste.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Emoji
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.easyicon.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Icon
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          虚拟主机
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          域名注册
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.namecheap.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Namecheap
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.freenom.com/zh/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Freenom
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.cloudflare.com/zh-cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Cloudflare
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第一章 MySQL简介及安装</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>第二章 体系结构及管理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dba/notes/dba02.html" class="active sidebar-link">体系结构及管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_1-mysql-c-s结构介绍" class="sidebar-link">1. MySQL C/S结构介绍</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_2-mysql实例的构成" class="sidebar-link">2. MySQL实例的构成</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-mysql中-mysqld-进程结构" class="sidebar-link">3. MySQL中 mysqld 进程结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-1-sql语句引入" class="sidebar-link">3.1 SQL语句引入</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-2-连接层" class="sidebar-link">3.2 连接层</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-3-sql层（在优化方面至关重要）" class="sidebar-link">3.3 SQL层（在优化方面至关重要）</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-4-存储引擎层" class="sidebar-link">3.4 存储引擎层</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-5-mysql逻辑存储结构" class="sidebar-link">3.5 MySQL逻辑存储结构</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-6-mysql物理存储结构" class="sidebar-link">3.6 MySQL物理存储结构</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_3-7-innodb-段-区-页概念" class="sidebar-link">3.7 innodb 段 区 页概念</a></li></ul></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_4-用户和权限管理" class="sidebar-link">4. 用户和权限管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_4-1作用" class="sidebar-link">4.1作用</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_4-2-用户的定义" class="sidebar-link">4.2 用户的定义</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_4-3-用户的操作" class="sidebar-link">4.3 用户的操作</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_4-4-权限管理" class="sidebar-link">4.4 权限管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_5-mysql的启动和关闭" class="sidebar-link">5. MySQL的启动和关闭</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_5-1-日常启停" class="sidebar-link">5.1 日常启停</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_5-2-维护性的任务方式启动" class="sidebar-link">5.2 维护性的任务方式启动</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_5-3-初始化配置" class="sidebar-link">5.3 初始化配置</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_5-4-配置文件读取顺序" class="sidebar-link">5.4 配置文件读取顺序</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_5-5-mysql的连接管理" class="sidebar-link">5.5 MySQL的连接管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_6-多实例管理" class="sidebar-link">6. 多实例管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_6-1-准备环境" class="sidebar-link">6.1 准备环境</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_6-2-初始化三套数据" class="sidebar-link">6.2 初始化三套数据</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_6-3-systemd-命令管理多实例" class="sidebar-link">6.3 Systemd 命令管理多实例</a></li><li class="sidebar-sub-header"><a href="/dba/notes/dba02.html#_6-4-启动多实例" class="sidebar-link">6.4 启动多实例</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第三章 SQL基础应用</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第四章 索引及执行计划</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>第五章 存储引擎</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="体系结构及管理"><a href="#体系结构及管理" class="header-anchor">#</a> 体系结构及管理</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-mysql-c-s结构介绍">1. MySQL C/S结构介绍</a></li><li><a href="#_2-mysql实例的构成">2. MySQL实例的构成</a></li><li><a href="#_3-mysql中-mysqld-进程结构">3. MySQL中 mysqld 进程结构</a><ul><li><a href="#_3-1-sql语句引入">3.1 SQL语句引入</a></li><li><a href="#_3-2-连接层">3.2 连接层</a></li><li><a href="#_3-3-sql层（在优化方面至关重要）">3.3 SQL层（在优化方面至关重要）</a></li><li><a href="#_3-4-存储引擎层">3.4 存储引擎层</a></li><li><a href="#_3-5-mysql逻辑存储结构">3.5 MySQL逻辑存储结构</a></li><li><a href="#_3-6-mysql物理存储结构">3.6 MySQL物理存储结构</a></li><li><a href="#_3-7-innodb-段-区-页概念">3.7 innodb 段 区 页概念</a></li></ul></li><li><a href="#_4-用户和权限管理">4. 用户和权限管理</a><ul><li><a href="#_4-1作用">4.1作用</a></li><li><a href="#_4-2-用户的定义">4.2 用户的定义</a></li><li><a href="#_4-3-用户的操作">4.3 用户的操作</a></li><li><a href="#_4-4-权限管理">4.4 权限管理</a></li></ul></li><li><a href="#_5-mysql的启动和关闭">5. MySQL的启动和关闭</a><ul><li><a href="#_5-1-日常启停">5.1 日常启停</a></li><li><a href="#_5-2-维护性的任务方式启动">5.2 维护性的任务方式启动</a></li><li><a href="#_5-3-初始化配置">5.3 初始化配置</a></li><li><a href="#_5-4-配置文件读取顺序">5.4 配置文件读取顺序</a></li><li><a href="#_5-5-mysql的连接管理">5.5 MySQL的连接管理</a></li></ul></li><li><a href="#_6-多实例管理">6. 多实例管理</a><ul><li><a href="#_6-1-准备环境">6.1 准备环境</a></li><li><a href="#_6-2-初始化三套数据">6.2 初始化三套数据</a></li><li><a href="#_6-3-systemd-命令管理多实例">6.3 Systemd 命令管理多实例</a></li><li><a href="#_6-4-启动多实例">6.4 启动多实例</a></li></ul></li></ul></div><p></p> <h2 id="_1-mysql-c-s结构介绍"><a href="#_1-mysql-c-s结构介绍" class="header-anchor">#</a> 1. MySQL C/S结构介绍</h2> <br> <p><strong>两种连接方式：</strong></p> <p><strong>TCP/IP：</strong><code>mysql -uroot -xin123 -h 10.0.0.51 -P3306</code></p> <p><strong>Socket：</strong><code>mysql -uroot -xin123 -S /tmp/mysql.sock</code></p> <br> <br> <h2 id="_2-mysql实例的构成"><a href="#_2-mysql实例的构成" class="header-anchor">#</a> 2. MySQL实例的构成</h2> <br> <p><strong>举例说明：</strong></p> <p><strong>公司：</strong> 老板 + 经理 + 员工 + 办公区</p> <p><strong>实例：</strong> mysqld + master thread + 干活的Thread + 预分配的内存</p> <br> <h2 id="_3-mysql中-mysqld-进程结构"><a href="#_3-mysql中-mysqld-进程结构" class="header-anchor">#</a> 3. MySQL中 mysqld 进程结构</h2> <br> <h3 id="_3-1-sql语句引入"><a href="#_3-1-sql语句引入" class="header-anchor">#</a> <strong>3.1 SQL语句引入</strong></h3> <p><strong>结构化的查询语言:</strong></p> <ul><li>DQL 数据查询语言</li> <li>DDL 数据定义语言</li> <li>DML 数据操作语言</li> <li>DCL 数据控制语言</li></ul> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">,</span>host <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h3 id="_3-2-连接层"><a href="#_3-2-连接层" class="header-anchor">#</a> <strong>3.2</strong> <strong>连接层</strong></h3> <br> <ol><li><strong>提供连接协议</strong> (两种方式)</li></ol> <p>​      Socket</p> <p>​      TCPIP</p> <ol start="2"><li><p>验证用户名（<code>root@localhost</code>）密码合法性，进行匹配专门的授权表。</p></li> <li><p>派生一个专用连接线程（接收SQL，返回结果）</p></li></ol> <p>​      使用命令  <code>mysql&gt; show processlist;</code> 查看</p> <br> <p><strong>思考：</strong></p> <p><strong>忘记密码的参数在哪做的手脚？</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>--skip-grant-tables
--skip-networking
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br> <h3 id="_3-3-sql层（在优化方面至关重要）"><a href="#_3-3-sql层（在优化方面至关重要）" class="header-anchor">#</a> 3.3 SQL层（在优化方面至关重要）</h3> <br> <ul><li>验证SQL语法和SQL_MODE</li> <li>验证语义</li> <li>验证权限</li> <li>解析器进行语句解析，生成执行计划（解析树）</li> <li>优化器（各种算法，基于执行代价），根据算法，找到代价最低的执行计划。代价是指：CPU 磁盘 IO</li> <li>执行器按照优化器选择执行计划，执行SQL语句，得出获取数据的方法。</li> <li>提供query cache(默认不开)，一般不开，会用redis</li> <li>记录操作日志（binlog），默认没开</li></ul> <br> <h3 id="_3-4-存储引擎层"><a href="#_3-4-存储引擎层" class="header-anchor">#</a> <strong>3.4</strong> <strong>存储引擎层</strong></h3> <p><strong>真正和磁盘打交道的一个层次</strong></p> <p>根据SQL层提供的取数据的方法，拿到数据，返回给SQL，结构化成表，再又连接层线程返回给用户。</p> <br> <h3 id="_3-5-mysql逻辑存储结构"><a href="#_3-5-mysql逻辑存储结构" class="header-anchor">#</a> <strong>3.5 MySQL逻辑存储结构</strong></h3> <br> <p>数据库逻辑结构与操作系统结构对照表：</p> <table><thead><tr><th><img width="115/">数据库逻辑结构<img width="115/"></th> <th style="text-align:center;"><img width="115/">操作系统<img width="115/"></th></tr></thead> <tbody><tr><td>库</td> <td style="text-align:center;">Linux 目录</td></tr> <tr><td>create database wordpress charset utf8mb4;</td> <td style="text-align:center;">mkdir /wordpress</td></tr> <tr><td>show databases;</td> <td style="text-align:center;">ls /</td></tr> <tr><td>use wordpress;</td> <td style="text-align:center;">cd /wordpress</td></tr> <tr><td>表</td> <td style="text-align:center;">Linux 的文件</td></tr> <tr><td>列（字段）</td> <td style="text-align:center;">无</td></tr> <tr><td>列属性</td> <td style="text-align:center;">无</td></tr> <tr><td>数据行（记录）</td> <td style="text-align:center;">Linux数据行</td></tr> <tr><td>表属性（元数据）</td> <td style="text-align:center;">Linux 文件属性</td></tr></tbody></table> <br> <br> <h3 id="_3-6-mysql物理存储结构"><a href="#_3-6-mysql物理存储结构" class="header-anchor">#</a> <strong>3.6 MySQL物理存储结构</strong></h3> <br> <br> <p><strong>库：</strong> 使用文件系统上的目录来表示</p> <br> <p><strong>表：</strong></p> <ul><li><strong>MyISAM(类似ext2)</strong><br>
user.frm ： 存储的表结构（列，列属性）<br>
user.MYD : 存储的数据记录<br>
user.MYI ： 存储索引<br></li></ul> <br> <ul><li><strong>InnoDB(类似XFS)<br></strong>
time_zone.frm ： 存储的表结构（列，列属性）<br>
time_zone.ibd ： 存储的数据记录和索引<br>
ibdata1 : 数据字典信息<br></li></ul> <br> <h3 id="_3-7-innodb-段-区-页概念"><a href="#_3-7-innodb-段-区-页概念" class="header-anchor">#</a> <strong>3.7 innodb</strong> 段 区 页概念</h3> <br> <ul><li>一般情况下（非分区表）</li> <li>一个表就是一个段</li> <li>一个段由多个区构成</li> <li>一个区在（16k），64个连续的页，1M大小</li></ul> <br> <h2 id="_4-用户和权限管理"><a href="#_4-用户和权限管理" class="header-anchor">#</a> 4. 用户和权限管理</h2> <h3 id="_4-1作用"><a href="#_4-1作用" class="header-anchor">#</a> 4.1作用</h3> <br> <ul><li><p>登录MySQL</p></li> <li><p>管理MySQL</p> <br></li></ul> <h3 id="_4-2-用户的定义"><a href="#_4-2-用户的定义" class="header-anchor">#</a> <strong>4.2</strong> 用户的定义</h3> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--用户名@'白名单'</span>
wordpress<span class="token variable">@'%'</span>
wordpress<span class="token variable">@'localhost'</span>
wordpress<span class="token variable">@'127.0.0.1'</span>
wordpress<span class="token variable">@'10.0.0.%'</span>
wordpress<span class="token variable">@'10.0.0.5%'</span>
wordpress<span class="token variable">@'10.0.0.0/255.255.254.0'</span>
wordpress<span class="token variable">@'10.0.%'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><br> <h3 id="_4-3-用户的操作"><a href="#_4-3-用户的操作" class="header-anchor">#</a> 4.3 用户的操作</h3> <h4 id="_4-3-1-创建用户"><a href="#_4-3-1-创建用户" class="header-anchor">#</a> 4.3.1 创建用户</h4> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">user</span> oldboy<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>说明：</strong></p> <p>8.0以前，可以自动创建用户并授权</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> oldguo<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h4 id="_4-3-2-查询用户"><a href="#_4-3-2-查询用户" class="header-anchor">#</a> 4.3.2 查询用户</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">,</span>host <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h4 id="_4-3-3-修改用户密码"><a href="#_4-3-3-修改用户密码" class="header-anchor">#</a> 4.3.3 修改用户密码</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">alter</span> <span class="token keyword">user</span> oldguo<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h4 id="_4-3-4-删除用户"><a href="#_4-3-4-删除用户" class="header-anchor">#</a> 4.3.4 删除用户</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">user</span> oldguo<span class="token variable">@'10.0.0.%'</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h3 id="_4-4-权限管理"><a href="#_4-4-权限管理" class="header-anchor">#</a> 4.4 权限管理</h3> <h4 id="_4-4-1-权限列表"><a href="#_4-4-1-权限列表" class="header-anchor">#</a> 4.4.1 权限列表</h4> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALL</span> 
<span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span><span class="token punctuation">,</span> <span class="token keyword">DROP</span><span class="token punctuation">,</span> RELOAD<span class="token punctuation">,</span> <span class="token keyword">SHUTDOWN</span><span class="token punctuation">,</span> PROCESS<span class="token punctuation">,</span> <span class="token keyword">FILE</span><span class="token punctuation">,</span> <span class="token keyword">REFERENCES</span><span class="token punctuation">,</span> <span class="token keyword">INDEX</span><span class="token punctuation">,</span> <span class="token keyword">ALTER</span><span class="token punctuation">,</span> <span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">,</span> SUPER<span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLES</span><span class="token punctuation">,</span> <span class="token keyword">LOCK</span> <span class="token keyword">TABLES</span><span class="token punctuation">,</span> <span class="token keyword">EXECUTE</span><span class="token punctuation">,</span> <span class="token keyword">REPLICATION</span> SLAVE<span class="token punctuation">,</span> <span class="token keyword">REPLICATION</span> CLIENT<span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span><span class="token punctuation">,</span> <span class="token keyword">SHOW</span> <span class="token keyword">VIEW</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">ROUTINE</span><span class="token punctuation">,</span> <span class="token keyword">ALTER</span> <span class="token keyword">ROUTINE</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">USER</span><span class="token punctuation">,</span> EVENT<span class="token punctuation">,</span> <span class="token keyword">TRIGGER</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLESPACE</span>
<span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span> <span class="token comment">--授权管理权限</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <h4 id="_4-4-2-授权命令"><a href="#_4-4-2-授权命令" class="header-anchor">#</a> 4.4.2 授权命令</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> oldguo<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123'</span> <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
 
<span class="token keyword">grant</span> 权限 <span class="token keyword">on</span> 作用目标 <span class="token keyword">to</span> 用户 identified <span class="token keyword">by</span> 密码 <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
 
<span class="token keyword">grant</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span><span class="token punctuation">,</span> <span class="token keyword">CREATE</span> <span class="token keyword">on</span> wordpress<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> 
 
<span class="token comment">-- 作用目标:</span>
<span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span>
wordpress<span class="token punctuation">.</span><span class="token operator">*</span> 
worpress<span class="token punctuation">.</span>t1 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><br> <h4 id="_4-4-3-授权需求"><a href="#_4-4-3-授权需求" class="header-anchor">#</a> 4.4.3 授权需求</h4> <br> <ol><li>创建一个管理员用户root，可以通过10网段，管理数据库.</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> root<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123'</span> <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>创建一个应用用户wordpress，可以通过10网段，wordpress库下的所有表进行 <code>SELECT,INSERT, UPDATE, DELETE</code> 操作</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">INSERT</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span><span class="token punctuation">,</span> <span class="token keyword">DELETE</span> <span class="token keyword">on</span> wordpress<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> wordpress<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h4 id="_4-4-4-回收权限"><a href="#_4-4-4-回收权限" class="header-anchor">#</a> 4.4.4 回收权限</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> grants <span class="token keyword">for</span> wordpress<span class="token variable">@'10.0.0.%'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">revoke</span> <span class="token keyword">delete</span> <span class="token keyword">on</span> wordpress<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'wordpress'</span><span class="token variable">@'10.0.0.%'</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">show</span> grants <span class="token keyword">for</span> wordpress<span class="token variable">@'10.0.0.%'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <br> <h4 id="_4-4-5-关于生产中开用户"><a href="#_4-4-5-关于生产中开用户" class="header-anchor">#</a> 4.4.5 关于生产中开用户</h4> <br> <p><font color="red"><strong>如何沟通开用户</strong></font></p> <ul><li>是否有邮件批复</li> <li>对哪些库和表做操作</li> <li>做什么操作</li> <li>从什么地址来登录</li></ul> <br> <p><strong><font color="red">开发人员找你要root用户密码？</font></strong></p> <ul><li>走流程拒绝他</li> <li>如果是金融类的公司</li></ul> <br> <br> <ul><li><strong><font color="red">原则上是不允许任何非DBA人员持有或申请root</font></strong></li> <li><font color="red"><strong>如果有人私下索要root密码，及时举报。</strong></font></li></ul> <br> <br> <h2 id="_5-mysql的启动和关闭"><a href="#_5-mysql的启动和关闭" class="header-anchor">#</a> 5. MySQL的启动和关闭</h2> <br> <img src="\img\dba\Section2-2-1.png" alt="多种启动方式介绍" width="85%" height="85%"> <p><strong>把 mysql.server 拷贝到了 init.d下</strong></p> <br> <br> <img src="\img\dba\Section2-2-2.png" alt="启动脚本" width="85%" height="85%"> <br> <h3 id="_5-1-日常启停"><a href="#_5-1-日常启停" class="header-anchor">#</a> 5.1 日常启停</h3> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>sys <span class="token operator">-</span>v 启动方式 mysql<span class="token punctuation">.</span>server <span class="token keyword">start</span> 脚本   启动过程：调用<span class="token comment">---&gt; mysqld_safe ---&gt;启动实例 mysqld </span>
mysql<span class="token punctuation">.</span>service   <span class="token comment">---&gt; mysqld 直接调用 mysqld 指定配置文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br> <br> <img src="\img\dba\Section2-2-3.png" alt="调用mysqld" width="85%" height="85%"> <p>需要依赖于 <strong>/etc/my.cnf</strong></p> <br> <br> <h3 id="_5-2-维护性的任务方式启动"><a href="#_5-2-维护性的任务方式启动" class="header-anchor">#</a> 5.2 维护性的任务方式启动</h3> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqld_safe <span class="token comment">--skip-grant-tables --skip-networking &amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <ul><li><p>启动时在命令行临时加入命令。</p></li> <li><p>我们一般会将我们需要的参数临时加到命令行。也会读取<code>/etc/my.cnf</code> 的内容,但是如果冲突,命令行优先级最高。</p> <br> <br></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code> mysqld_safe <span class="token operator">&amp;</span>
 mysqladmin -uroot -p123 <span class="token function">shutdown</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br> <br> <h3 id="_5-3-初始化配置"><a href="#_5-3-初始化配置" class="header-anchor">#</a> 5.3 初始化配置</h3> <br> <h4 id="_5-3-1-作用"><a href="#_5-3-1-作用" class="header-anchor">#</a> 5.3.1 作用</h4> <ul><li>影响数据库的启动</li> <li>影响到客户端的功能</li></ul> <br> <h4 id="_5-3-2-初始化配置的方法"><a href="#_5-3-2-初始化配置的方法" class="header-anchor">#</a> 5.3.2 初始化配置的方法</h4> <br> <ul><li>初始化配置文件(例如<code>/etc/my.cnf</code>)</li> <li>启动命令行上进行设置(例如:<code>mysqld_safe mysqld</code>)</li> <li>预编译时设置(仅限于编译安装时设置)
<br></li></ul> <h4 id="_5-2-3-初始化配置文件的书写格式"><a href="#_5-2-3-初始化配置文件的书写格式" class="header-anchor">#</a> 5.2.3 初始化配置文件的书写格式</h4> <br> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>标签<span class="token punctuation">]</span>
<span class="token assign-left variable">xxx</span><span class="token operator">=</span>xxx
<span class="token punctuation">[</span>标签<span class="token punctuation">]</span>
<span class="token assign-left variable">xxx</span><span class="token operator">=</span>xxx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br> <h4 id="_5-2-4-配置文件标签的归类"><a href="#_5-2-4-配置文件标签的归类" class="header-anchor">#</a> 5.2.4 配置文件标签的归类</h4> <br> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">服务器端</span><span class="token punctuation">:</span>
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token punctuation">[</span>mysqld_safe<span class="token punctuation">]</span>
<span class="token punctuation">[</span>server<span class="token punctuation">]</span>
 
<span class="token key atrule">客户端</span><span class="token punctuation">:</span> 
<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
<span class="token punctuation">[</span>mysqladmin<span class="token punctuation">]</span>
<span class="token punctuation">[</span>mysqldump<span class="token punctuation">]</span>
<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><br> <h4 id="_5-2-5-配置文件设置样板（5-7版本"><a href="#_5-2-5-配置文件设置样板（5-7版本" class="header-anchor">#</a> 5.2.5 配置文件设置样板（5.7版本)</h4> <br> <p><strong>服务器端配置</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
<span class="token comment">#用户</span>
<span class="token assign-left variable">user</span><span class="token operator">=</span>mysql  
<span class="token comment">#软件安装目录        </span>
<span class="token assign-left variable">basedir</span><span class="token operator">=</span>/application/mysql 
<span class="token comment">#数据路径</span>
<span class="token assign-left variable">datadir</span><span class="token operator">=</span>/data/mysql/data 
<span class="token comment">#socket文件位置</span>
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/tmp/mysql.sock
<span class="token comment">#服务器id号 用于主备</span>
<span class="token assign-left variable">server_id</span><span class="token operator">=</span><span class="token number">6</span>
<span class="token comment">#端口号</span>
<span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">3306</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><br> <p><strong>客户端配置</strong></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
<span class="token comment">#socket文件位置</span>
<span class="token assign-left variable">socket</span><span class="token operator">=</span>/tmp/mysql.sock
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <h3 id="_5-4-配置文件读取顺序"><a href="#_5-4-配置文件读取顺序" class="header-anchor">#</a> 5.4 配置文件读取顺序</h3> <br> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysqld <span class="token comment">--help --verbose |grep my.cnf</span>
<span class="token operator">/</span>etc<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">/</span>etc<span class="token operator">/</span>mysql<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">/</span>usr<span class="token operator">/</span><span class="token keyword">local</span><span class="token operator">/</span>mysql<span class="token operator">/</span>etc<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>my<span class="token punctuation">.</span>cnf 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br> <p><strong>强制使用自定义配置文件</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--defautls-file </span>
mysqld_safe <span class="token comment">--defaults-file=/tmp/aa.txt &amp;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><br> <h3 id="_5-5-mysql的连接管理"><a href="#_5-5-mysql的连接管理" class="header-anchor">#</a> 5.5 MySQL的连接管理</h3> <br> <h4 id="_5-5-1-mysql-命令"><a href="#_5-5-1-mysql-命令" class="header-anchor">#</a> 5.5.1 mysql 命令</h4> <br> <p><strong>注意:提前应该将用户授权做好</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> root<span class="token variable">@'10.0.0.%'</span> identified <span class="token keyword">by</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
TCPIP :
mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p <span class="token operator">-</span>h <span class="token number">10.0</span><span class="token number">.0</span><span class="token number">.51</span> <span class="token operator">-</span>P3306 
Socket 
mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p <span class="token operator">-</span>S <span class="token operator">/</span>tmp<span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock
<span class="token keyword">show</span> processlist<span class="token punctuation">;</span> 查看登录情况
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><br> <h4 id="_5-5-2-客户端工具"><a href="#_5-5-2-客户端工具" class="header-anchor">#</a> 5.5.2 客户端工具</h4> <ul><li><strong>sqlyog</strong></li> <li><strong>navicat</strong></li></ul> <img src="\img\dba\Section2-2-4.png" alt="客户端工具" width="85%" height="85%"> <br> <br> <h2 id="_6-多实例管理"><a href="#_6-多实例管理" class="header-anchor">#</a> 6. 多实例管理</h2> <br> <h3 id="_6-1-准备环境"><a href="#_6-1-准备环境" class="header-anchor">#</a> 6.1 准备环境</h3> <br> <p><strong>准备多个目录</strong></p> <br> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">mkdir</span> -p /data/330<span class="token punctuation">{</span><span class="token number">7,8</span>,9<span class="token punctuation">}</span>/data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <p><strong>准备多个配置文件</strong></p> <br> <p><strong><font color="#E74C3C">实例一配置文件</font></strong></p> <div class="language-php line-numbers-mode"><pre class="language-php"><code>cat <span class="token operator">&gt;</span> <span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3307</span><span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>

basedir<span class="token operator">=</span><span class="token operator">/</span>application<span class="token operator">/</span>mysql

datadir<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3307</span><span class="token operator">/</span>data

socket<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3307</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock

log_error<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3307</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>log

port<span class="token operator">=</span><span class="token number">3307</span>

server_id<span class="token operator">=</span><span class="token number">7</span>

log_bin<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3307</span><span class="token operator">/</span>mysql<span class="token operator">-</span>bin

<span class="token constant">EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><br> <p><strong><font color="#3498DB">实例二配置文件</font></strong></p> <div class="language-php line-numbers-mode"><pre class="language-php"><code>cat <span class="token operator">&gt;</span> <span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3308</span><span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>

basedir<span class="token operator">=</span><span class="token operator">/</span>application<span class="token operator">/</span>mysql

datadir<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3308</span><span class="token operator">/</span>data

socket<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3308</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock

log_error<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3308</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>log

port<span class="token operator">=</span><span class="token number">3308</span>

server_id<span class="token operator">=</span><span class="token number">8</span>

log_bin<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3308</span><span class="token operator">/</span>mysql<span class="token operator">-</span>bin

<span class="token constant">EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><br> <p><font color="#27AE60"><strong>实例三配置文件</strong></font></p> <div class="language-php line-numbers-mode"><pre class="language-php"><code>实例三配置文件 

cat <span class="token operator">&gt;</span> <span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3309</span><span class="token operator">/</span>my<span class="token punctuation">.</span>cnf <span class="token operator">&lt;</span><span class="token operator">&lt;</span><span class="token constant">EOF</span>

<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>

basedir<span class="token operator">=</span><span class="token operator">/</span>application<span class="token operator">/</span>mysql

datadir<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3309</span><span class="token operator">/</span>data

socket<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3309</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>sock

log_error<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3309</span><span class="token operator">/</span>mysql<span class="token punctuation">.</span>log

port<span class="token operator">=</span><span class="token number">3309</span>

server_id<span class="token operator">=</span><span class="token number">9</span>

log_bin<span class="token operator">=</span><span class="token operator">/</span>data<span class="token operator">/</span><span class="token number">3309</span><span class="token operator">/</span>mysql<span class="token operator">-</span>bin

<span class="token constant">EOF</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><br> <br> <h3 id="_6-2-初始化三套数据"><a href="#_6-2-初始化三套数据" class="header-anchor">#</a> 6.2 初始化三套数据</h3> <br> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">mv</span> /etc/my.cnf /etc/my.cnf.bak
mysqld --initialize-insecure --user<span class="token operator">=</span>mysql --datadir<span class="token operator">=</span>/data/3307/data --basedir<span class="token operator">=</span>/application/mysql
mysqld --initialize-insecure --user<span class="token operator">=</span>mysql --datadir<span class="token operator">=</span>/data/3308/data --basedir<span class="token operator">=</span>/application/mysql
mysqld --initialize-insecure --user<span class="token operator">=</span>mysql --datadir<span class="token operator">=</span>/data/3309/data --basedir<span class="token operator">=</span>/application/mysql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><br> <h3 id="_6-3-systemd-命令管理多实例"><a href="#_6-3-systemd-命令管理多实例" class="header-anchor">#</a> 6.3 Systemd 命令管理多实例</h3> <br> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/systemd/system

<span class="token function">cp</span> mysqld.service mysqld3307.service

<span class="token function">cp</span> mysqld.service mysqld3308.service

<span class="token function">cp</span> mysqld.service mysqld3309.service

 

<span class="token function">vim</span> mysqld3307.service

<span class="token comment"># 修改为:</span>

<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/application/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/data/3307/my.cnf

<span class="token function">vim</span> mysqld3308.service

<span class="token comment"># 修改为:</span>

<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/application/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/data/3308/my.cnf

<span class="token function">vim</span> mysqld3309.service

<span class="token comment"># 修改为:</span>

<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/application/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/data/3309/my.cnf


<span class="token punctuation">[</span>root@db01 system<span class="token punctuation">]</span><span class="token comment"># grep &quot;ExecStart&quot; mysqld3309.service</span>

<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/application/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/data/3309/my.cnf

<span class="token punctuation">[</span>root@db01 system<span class="token punctuation">]</span><span class="token comment"># grep &quot;ExecStart&quot; mysqld3308.service</span>

<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/application/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/data/3308/my.cnf

<span class="token punctuation">[</span>root@db01 system<span class="token punctuation">]</span><span class="token comment"># grep &quot;ExecStart&quot; mysqld3307.service</span>

<span class="token assign-left variable">ExecStart</span><span class="token operator">=</span>/application/mysql/bin/mysqld --defaults-file<span class="token operator">=</span>/data/3307/my.cnf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><br> <p><strong>对目录授权</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">chown</span> -R mysql.mysql /data/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><br> <h3 id="_6-4-启动多实例"><a href="#_6-4-启动多实例" class="header-anchor">#</a> 6.4 启动多实例</h3> <br> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl start mysqld3307.service
systemctl start mysqld3308.service
systemctl start mysqld3309.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <br> <p><strong>验证多实例</strong></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">netstat</span> -lnp<span class="token operator">|</span><span class="token function">grep</span> <span class="token number">330</span>

mysql -S /data/3307/mysql.sock -e <span class="token string">&quot;select @@server_id&quot;</span>
mysql -S /data/3308/mysql.sock -e <span class="token string">&quot;select @@server_id&quot;</span>
mysql -S /data/3309/mysql.sock -e <span class="token string">&quot;select @@server_id&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2020年5月18日星期一中午12点04分</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/dba/notes/dba01.html" class="prev">
        数据库版本介绍与安装
      </a></span> <span class="next"><a href="/dba/notes/dba03.html">
        SQL 基本概念引入
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.211d752d.js" defer></script><script src="/assets/js/5.c313c3d0.js" defer></script><script src="/assets/js/2.de429ac0.js" defer></script><script src="/assets/js/19.b10de245.js" defer></script>
  </body>
</html>
