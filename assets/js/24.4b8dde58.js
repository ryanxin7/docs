(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{429:function(t,s,a){"use strict";a.r(s);var e=a(27),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"第三章回顾-补充元数据查询部分"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三章回顾-补充元数据查询部分"}},[t._v("#")]),t._v(" 第三章回顾 补充元数据查询部分")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#_1-上节回顾"}},[t._v("1.上节回顾")]),a("ul",[a("li",[a("a",{attrs:{href:"#_1-1-group-by-name-分组-排序-对比-去重"}},[t._v("1.1 group by name  分组   排序 对比 去重")])]),a("li",[a("a",{attrs:{href:"#_1-2-关于group-by-的sql-mode"}},[t._v("1.2 关于group by 的sql_mode")])]),a("li",[a("a",{attrs:{href:"#_1-3-group-concat-多列-转为一行"}},[t._v("1.3 group_concat 多列 转为一行")])]),a("li",[a("a",{attrs:{href:"#_1-4-concat-拼接语句-列值拼接"}},[t._v("1.4 concat  拼接语句 列值拼接")])]),a("li",[a("a",{attrs:{href:"#_1-5-关于多表连接语法规则"}},[t._v("1.5 关于多表连接语法规则")])]),a("li",[a("a",{attrs:{href:"#_1-6-创建别名"}},[t._v("1.6 创建别名")])]),a("li",[a("a",{attrs:{href:"#_1-7-distinct-去重复"}},[t._v("1.7 distinct 去重复")])]),a("li",[a("a",{attrs:{href:"#_1-8-select-执行顺序"}},[t._v("1.8 select 执行顺序")])])])]),a("li",[a("a",{attrs:{href:"#_2-扩展类内容-元数据获取"}},[t._v("2. 扩展类内容 元数据获取")]),a("ul",[a("li",[a("a",{attrs:{href:"#_2-1-元数据介绍及获取介绍"}},[t._v("2.1 元数据介绍及获取介绍")])]),a("li",[a("a",{attrs:{href:"#_2-2-配合concat-函数拼接语句或命令"}},[t._v("2.2. 配合concat( )函数拼接语句或命令")])]),a("li",[a("a",{attrs:{href:"#_2-3-show-常用命令介绍"}},[t._v("2.3 show 常用命令介绍")])])])])])]),a("p"),t._v(" "),a("h2",{attrs:{id:"_1-上节回顾"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-上节回顾"}},[t._v("#")]),t._v(" 1.上节回顾")]),t._v(" "),a("h3",{attrs:{id:"_1-1-group-by-name-分组-排序-对比-去重"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-group-by-name-分组-排序-对比-去重"}},[t._v("#")]),t._v(" 1.1 group by name  分组   排序 对比 去重")]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-1.png",alt:"day04-1"}}),t._v(" "),a("h3",{attrs:{id:"_1-2-关于group-by-的sql-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-关于group-by-的sql-mode"}},[t._v("#")]),t._v(" 1.2 关于group by 的sql_mode")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),a("p",[a("code",[t._v("only_full_group_by")]),t._v(" 参数")]),t._v(" "),a("ul",[a("li",[t._v("在5.7版本中MySQL sql_mode参数中自带，5.6和8.0都没有")]),t._v(" "),a("li",[t._v("在带有group by 字句的select中，select 后的条件列（非主键列），")]),t._v(" "),a("li",[t._v("要么是group by后的列，要么需要在函数中包裹")])])]),t._v(" "),a("p",[a("strong",[t._v("关掉限制：")]),t._v(" 编辑配置文件时去掉 "),a("code",[t._v("ONLY_FULL_GROUP_BY")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-2.png",alt:"day04-2"}}),t._v(" "),a("h3",{attrs:{id:"_1-3-group-concat-多列-转为一行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-group-concat-多列-转为一行"}},[t._v("#")]),t._v(" 1.3 group_concat 多列 转为一行")]),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("列转行聚合函数")])]),t._v(" "),a("div",{staticClass:"language-plsql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-plsql"}},[a("code",[t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("group_concat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-3.png",alt:"day04-3"}}),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_1-4-concat-拼接语句-列值拼接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-concat-拼接语句-列值拼接"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1.4 concat")]),t._v(" "),a("strong",[t._v("拼接语句")]),t._v(" 列值拼接")]),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("做列值拼接")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" concat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-4.png",alt:"day04-4"}}),t._v(" "),a("h3",{attrs:{id:"_1-5-关于多表连接语法规则"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-关于多表连接语法规则"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1.5")]),t._v(" 关于多表连接语法规则")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("多表连接语法规则")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("1.首先找涉及到的所有表")])]),t._v(" "),a("li",[a("p",[t._v("2.找到表和表之间的关联列")])]),t._v(" "),a("li",[a("p",[t._v("3.关联条件写在 "),a("code",[t._v("on")]),t._v(" 后面 "),a("code",[t._v("A join B on")]),t._v(" 关联列")])]),t._v(" "),a("li",[a("p",[t._v("4.所有需要查询的信息放在select后")])]),t._v(" "),a("li",[a("p",[t._v("5.其他的过滤条件 "),a("code",[t._v("where group by having order by limit")]),t._v(" 往最后放")])]),t._v(" "),a("li",[a("p",[t._v("注意：对多表连接中，驱动表选择数据行少的表。后续所有表的关联列尽量是主键或唯一键（表设计），至少建立一个索引。")])])])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("注意 ❗")]),t._v(" "),a("p",[t._v("数据行较少的放在左边（驱动表） 因为他要拿整表的数据和右边的表进行关联")])]),t._v(" "),a("h3",{attrs:{id:"_1-6-创建别名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-创建别名"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1.6")]),t._v(" 创建别名")]),t._v(" "),a("p",[a("strong",[t._v("表别名")])]),t._v(" "),a("p",[a("strong",[t._v("列别名")])]),t._v(" "),a("p",[t._v("count")]),t._v(" "),a("p",[t._v("oldguo  linux  a,b,c,d")]),t._v(" "),a("p",[t._v("oldguo  python x，y,z")]),t._v(" "),a("p",[t._v("oldboy  linux  10")]),t._v(" "),a("p",[t._v("hsw   python 11")]),t._v(" "),a("h3",{attrs:{id:"_1-7-distinct-去重复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-distinct-去重复"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1.7 distinct")]),t._v(" "),a("strong",[t._v("去重复")])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("distinct")]),t._v(" countrycode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" city"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//在城市表中 查看所有国家代号 去重复")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("br"),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_1-8-select-执行顺序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-select-执行顺序"}},[t._v("#")]),t._v(" "),a("strong",[t._v("1.8 select")]),t._v(" "),a("strong",[t._v("执行顺序")])]),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("count")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" 表  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("where")]),t._v(" 列  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("group")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("user")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("having")]),t._v(" 列  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("order")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("by")]),t._v(" 列 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("查询语句执行顺序")]),t._v(" "),a("p",[t._v("没有索引的情况下会把整表数据加载到内存中，进行过滤过滤后在内存中只留下满足条件的数据。 针对满足条件的数据进行分组 （group by ），在根据select 的条件列取列产生新的结果集，having会对结果集再进行一次过滤。order by 对列数据进行比较大小排列顺序 最后显示。")])]),t._v(" "),a("br"),t._v(" "),a("h2",{attrs:{id:"_2-扩展类内容-元数据获取"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-扩展类内容-元数据获取"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2.")]),t._v(" 扩展类内容 元数据获取")]),t._v(" "),a("br"),t._v(" "),a("h3",{attrs:{id:"_2-1-元数据介绍及获取介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-元数据介绍及获取介绍"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2.1")]),t._v(" "),a("strong",[t._v("元数据介绍及获取介绍")])]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("元数据")]),t._v(" "),a("p",[t._v('元数据是存储在"基表"中。')]),t._v(" "),a("p",[t._v("通过专用的DDL语句，DCL语句进行修改")]),t._v(" "),a("p",[t._v("通过专用视图和命令进行元数据的查询")]),t._v(" "),a("p",[a("code",[t._v("information_schema")]),t._v("中保存了大量元数据查询的试图")]),t._v(" "),a("p",[a("code",[t._v("show")]),t._v("  命令是封装好功能，提供元数据查询基础功能")])]),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("创建视图：")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-5.png",alt:"day04-5"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("查询视图：")])]),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-6.png",alt:"day04-6"}}),t._v(" "),a("p",[a("strong",[t._v("2.1 information_schema 的基本应用")])]),t._v(" "),a("p",[a("strong",[t._v("tables 视图的应用:")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-7.png",alt:"day04-7"}}),t._v(" "),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-8.png",alt:"day04-8"}}),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("p",[a("strong",[t._v("TABLES 和表有关的元数据")])]),t._v(" "),a("br"),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("img",{attrs:{width:"100/"}}),t._v("TABLE_SCHEMA"),a("img",{attrs:{width:"100/"}})]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[a("img",{attrs:{width:"100/"}}),t._v("表所在的库名"),a("img",{attrs:{width:"100/"}})])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("TABLE_NAME")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("表名")])]),t._v(" "),a("tr",[a("td",[t._v("ENGINE")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("存储引擎")])]),t._v(" "),a("tr",[a("td",[t._v("TABLE_ROWS")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("数据行")])]),t._v(" "),a("tr",[a("td",[t._v("AVG_ROW_LENGTH")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("平均行长度")])]),t._v(" "),a("tr",[a("td",[t._v("INDEX_LENGTH")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("索引长度")])])])]),t._v(" "),a("p",[a("strong",[t._v("举例说明：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("USE information_schema; \nDESC TABLES;\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[a("strong",[t._v("显示所有的库和表的信息")])])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[a("strong",[t._v("显示所有的库和表的信息（结果集多行转成一行）")])])]),t._v(" "),a("p",[t._v("world 库下  "),a("code",[t._v("city,country,country,language")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("GROUP_CONCAT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tables")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("查询所有"),a("strong",[t._v("innodb")]),t._v("引擎的表")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_name "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tables")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENGINE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'innodb'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[a("strong",[t._v("统计world下的city表占用空间大小")])])]),t._v(" "),a("p",[t._v("$$\n公式：表的数据量=平均行长度*行数+索引长度\n$$")]),t._v(" "),a("p",[a("code",[t._v("AVG_ROW_LENGTH*TABLE_ROWS+INDEX_LENGTH")]),t._v("  统计整个city 表的真实数据量大小")]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AVG_ROW_LENGTH"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("TABLE_ROWS"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("INDEX_LENGTH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//kb显示")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLES")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("AND")]),t._v(" table_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'city'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[a("strong",[t._v("统计每个库的数据量大小，并按数据量从大到小排序")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("SUM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("AVG_ROW_LENGTH"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("TABLE_ROWS"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("INDEX_LENGTH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" total_KB    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" 库中有多个表 所以需要加一起 使用 SUM 函数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLES")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" table_schema 库名排队\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ORDER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" total_KB "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DESC")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" 排序\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_2-2-配合concat-函数拼接语句或命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-配合concat-函数拼接语句或命令"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2.2.")]),t._v(" "),a("strong",[t._v("配合concat( )函数拼接语句或命令")])]),t._v(" "),a("p",[a("strong",[t._v("举例说明：")])]),t._v(" "),a("ul",[a("li",[t._v("模仿以下语句,进行数据库的分库分表备份。")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[t._v("mysqldump "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("uroot "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("p123 world city "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bak"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("world_city"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sql")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//分库分表备份")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("拼接语句：")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\nCONCAT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysqldump -uroot -p123 "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_name\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" >/bak/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('".sql"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tables")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("img",{staticStyle:{zoom:"80%"},attrs:{src:"\\img\\day04-9.png",alt:"day04-9"}}),t._v(" "),a("ul",[a("li",[a("strong",[t._v("模仿以下语句,进行批量生成对world库下所有表进行操作")])])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ALTER")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLE")]),t._v(" world"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("city "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("DISCARD")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TABLESPACE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("strong",[t._v("拼接语句：")])]),t._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" \nCONCAT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ALTER TABLE "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('" DISCARD TABLESPACE;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("tables")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("WHERE")]),t._v(" table_schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'world'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"_2-3-show-常用命令介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-show-常用命令介绍"}},[t._v("#")]),t._v(" "),a("strong",[t._v("2.3 show 常用命令介绍")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[a("img",{attrs:{width:"136/"}}),t._v("主要命令"),a("img",{attrs:{width:"136/"}})]),t._v(" "),a("th",[a("img",{attrs:{width:"136/"}}),t._v("作用说明"),a("img",{attrs:{width:"136/"}})])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show databases;")]),t._v(" "),a("td",[t._v("查看数据库名")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show tables;")]),t._v(" "),a("td",[t._v("查看表名")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show create database xx;")]),t._v(" "),a("td",[t._v("查看建库语句")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show create table xx;")]),t._v(" "),a("td",[t._v("查看建表语句")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show processlist;")]),t._v(" "),a("td",[t._v("查看所有用户连接情况")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show charset;")]),t._v(" "),a("td",[t._v("查看支持的字符集")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show collation;")]),t._v(" "),a("td",[t._v("查看所有支持的校对规则")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show grants for xx;")]),t._v(" "),a("td",[t._v("查看用户的权限信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show variables like '%xx%'")]),t._v(" "),a("td",[t._v("查看参数信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show engines;")]),t._v(" "),a("td",[t._v("查看所有支持的存储引擎类型")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show index from xxx")]),t._v(" "),a("td",[t._v("查看表的索引信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show engine innodb status\\G")]),t._v(" "),a("td",[t._v("查看innoDB引擎详细状态信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show binary logs")]),t._v(" "),a("td",[t._v("查看二进制日志的列表信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show binlog events in '二进制文件名'")]),t._v(" "),a("td",[t._v("查看二进制日志的事件信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show master status ;")]),t._v(" "),a("td",[t._v("查看mysql当前使用二进制日志信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show slave status\\G")]),t._v(" "),a("td",[t._v("查看从库状态信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show status like ''")]),t._v(" "),a("td",[t._v("查看数据库整体状态信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("help show ;")]),t._v(" "),a("td",[t._v("查看更多")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("show relaylog events in ''")]),t._v(" "),a("td",[t._v("查看中继日志的事件信息")])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);