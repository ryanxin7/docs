(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{423:function(s,t,a){"use strict";a.r(t);var n=a(27),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"数据库版本介绍与安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库版本介绍与安装"}},[s._v("#")]),s._v(" 数据库版本介绍与安装")]),s._v(" "),a("p",[s._v("数据库是数据管理的有效技术，是由一批数据构成的有序集合，这些数据被存放在结构化的数据表里。数据表之间相互关联，反映客观事物间的本质联系。数据库能有效地帮助一个组织或企业科学地管理各类信息资源。数据是数据库中存储的基本对象，是按一定顺序排列组合的物理符号。")]),s._v(" "),a("p",[s._v("数据有多种表现形式，可以是数字、文字、图像，甚至是音频或视频，它们都可以经过数字化后存入计算机。数据库是数据的集合，具有统一的结构形式并存放于统一的存储介质内，是多种应用数据的集成，并可被各个应用程序所共享。")]),s._v(" "),a("h2",{attrs:{id:"_1-dba-职业素养"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-dba-职业素养"}},[s._v("#")]),s._v(" 1. DBA 职业素养")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("职业素养")]),s._v(" "),a("p",[a("strong",[s._v("人品")]),s._v(":  权利越大责任越大，要禁得住诱惑，严禁私自偷卖企业数据或向他人泄露秘钥信息。")]),s._v(" "),a("p",[a("strong",[s._v("严谨")]),s._v(":  操作数据库执行修改、删除类的命令时再三考虑，同事安排工作落实到笔头上，要有理论或者实践的支撑没测试过的参数绝对不能上生产环境。")]),s._v(" "),a("p",[a("strong",[s._v("细心")]),s._v("：请收起好奇心，做到敏感内容不听、不看、不问学会保护自己，把最简单的事情做的最漂亮，最专业。")]),s._v(" "),a("p",[a("strong",[s._v("心态")]),s._v("：在压力较大环境下做到不慌不乱，别惹事，出事别怕事。操作失误第一时间上报领导，不要自作主张操作。")])]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"_1-1-职业技能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-职业技能"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.1 职业技能")])]),s._v(" "),a("ul",[a("li",[s._v("熟悉操作系统")]),s._v(" "),a("li",[s._v("熟悉公司业务")]),s._v(" "),a("li",[s._v("产品的功能")]),s._v(" "),a("li",[s._v("用户的行为(热功能,热数据）")])]),s._v(" "),a("h3",{attrs:{id:"_1-2-熟悉行业"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-熟悉行业"}},[s._v("#")]),s._v(" "),a("strong",[s._v("1.2 熟悉行业")])]),s._v(" "),a("ul",[a("li",[s._v("熟悉行业发展趋势")]),s._v(" "),a("li",[s._v("了解版本新特性及使用率")]),s._v(" "),a("li",[s._v("数据库产品类型")]),s._v(" "),a("li",[s._v("定期参加 "),a("a",{attrs:{href:"https://db-engines.com/en/ranking",target:"_blank",rel:"noopener noreferrer"}},[s._v("数据库大会"),a("OutboundLink")],1)])]),s._v(" "),a("br"),s._v(" "),a("p",[a("strong",[s._v("喜欢数据库")]),s._v("：体验很重要")]),s._v(" "),a("br"),s._v(" "),a("p",[a("strong",[s._v("其实成功的门槛并不拥挤，因为大部分人在路上就放弃了。")]),s._v("—— "),a("a",{attrs:{href:"https://www.jianshu.com/u/44068ed972c7",target:"_blank",rel:"noopener noreferrer"}},[s._v("Oldguo"),a("OutboundLink")],1)]),s._v(" "),a("br"),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"_2-数据库产品"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-数据库产品"}},[s._v("#")]),s._v(" 2. 数据库产品")]),s._v(" "),a("p",[s._v("4.1 什么是数据？")]),s._v(" "),a("p",[s._v("4.2 DBMS 数据库管理系统")]),s._v(" "),a("p",[s._v("RDBMS ： Oracle ，MySQL ，PG，MSSQL")]),s._v(" "),a("p",[s._v("NoSQL ： MongoDB ，Redis ，ES")]),s._v(" "),a("p",[s._v("NEWSQL （分布式）： TiDB，Spanner ，AliSQL(RDS+DRDS) ，OB ，PolarDB")]),s._v(" "),a("h3",{attrs:{id:"_2-1-mysql-版本选择"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-mysql-版本选择"}},[s._v("#")]),s._v(" 2.1 MySQL 版本选择")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("现阶段企业生产主要版本")]),s._v(" "),a("th",[s._v("更新版本")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("5.6")]),s._v(" "),a("td",[s._v("5.6.34 ， 5.6.36 ，"),a("strong",[s._v("5.6.38")]),s._v("（2017913） ，5.6.40")])]),s._v(" "),a("tr",[a("td",[s._v("5.7")]),s._v(" "),a("td",[s._v("5.7.18 ，"),a("strong",[s._v("5.7.20")]),s._v("（2017913） ，5.7.24 ，"),a("strong",[s._v("5.7.26")])])]),s._v(" "),a("tr",[a("td",[s._v("8.0")]),s._v(" "),a("td",[s._v("8.0.14， 8.0.15 ，"),a("strong",[s._v("8.0.16")])])])])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://downloads.mysql.com/archives/community/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网下载地址"),a("OutboundLink")],1)]),s._v(" "),a("br"),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"_2-2-mysql安装方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mysql安装方式"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2.2 MySQL安装方式")])]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("二进制文件安装：")]),s._v(" 💗 "),a("code",[s._v("较多使用")])])]),s._v(" "),a("img",{staticStyle:{zoom:"95%"},attrs:{src:"\\img\\day01-1.png",alt:"day04-10"}}),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("strong",[s._v("RHEL RPM 包安装：")])])]),s._v(" "),a("img",{staticStyle:{zoom:"95%"},attrs:{src:"\\img\\day01-2.png",alt:"day04-10"}}),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("strong",[s._v("源代码编译")])])]),s._v(" "),a("img",{staticStyle:{zoom:"95%"},attrs:{src:"\\img\\day01-3.png",alt:"day04-10"}}),s._v(" "),a("br"),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"_3-mysql-二进制版本安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-mysql-二进制版本安装"}},[s._v("#")]),s._v(" 3. MySQL 二进制版本安装")]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"_3-1-下载并上传软件至目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-下载并上传软件至目录"}},[s._v("#")]),s._v(" 3.1 "),a("strong",[s._v("下载并上传软件至目录")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir -p /server/tools")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /server/tools/")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 /server/tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y lrzsz")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 /server/tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\n\nmysql-5.7.26-linux-glibc2.12-x86_64.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[a("strong",[s._v("解压软件移动软件目录")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 /server/tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tar xf mysql-5.7.26-linux-glibc2.12-x86_64.tar.gz ")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /application")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 /server/tools"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mv mysql-5.7.26-linux-glibc2.12-x86_64 /application/mysql")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("用户的创建处理原始环境")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum remove mariadb-libs-5.5.64-1.el7.x86_64  #卸载mariadb软件包")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rpm -qa |grep mariadb")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# useradd -s /sbin/nologin mysql")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("数据和软件部分独立开 (贴近生产)")])]),s._v(" "),a("img",{staticStyle:{zoom:"95%"},attrs:{src:"\\img\\day01-4.png",alt:"day04-10"}}),s._v(" "),a("h3",{attrs:{id:"_3-2-设置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-设置环境变量"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.2 设置环境变量")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin:"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# source /etc/profile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysql -V   #测试安装成功")]),s._v("\nmysql Ver "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.14")]),s._v(" Distrib "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(".26, "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" linux-glibc2.12 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x86_64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" using EditLine wrapper\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_3-3-创建数据路径并授权"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-创建数据路径并授权"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.3 创建数据路径并授权")])]),s._v(" "),a("p",[a("strong",[s._v("添加一块新磁盘模拟数据盘，格式化并挂载磁盘。")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkfs.xfs /dev/sdc")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# blkid  #查看硬盘UUID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/fstab ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# UUID="b7fde522-aa37-412a-9584-8313a673c5cc" /data xfs defaults 0 0')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mount -a")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# df -h")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("对目录授权")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql.mysql /application/*\n "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql.mysql /data\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_3-4-初始化数据（创建系统数据）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-初始化数据（创建系统数据）"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.4 初始化数据（创建系统数据）")])]),s._v(" "),a("p",[s._v("5.6 版本 数据库初始化命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" /application/mysql/scripts/mysql_install_db \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("5.7 版本及之后版本数据库初始化命令：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mkdir /data/mysql/data -p ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chown -R mysql.mysql /data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysqld --initialize --user=mysql --basedir=/application/mysql --datadir=/data/mysql/data ")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("br"),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("5.7 版本说明")]),s._v(" "),a("p",[a("strong",[s._v("--initialize 参数：")]),s._v(" "),a("strong",[s._v("做了什么？")])]),s._v(" "),a("p",[a("strong",[s._v("对于密码复杂度进行定制：12位，4种")])]),s._v(" "),a("p",[a("strong",[s._v("密码过期时间：180天")])]),s._v(" "),a("p",[a("strong",[s._v("给root@localhost用户设置临时密码")])])]),s._v(" "),a("br"),s._v(" "),a("br"),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("报错:mysqld: error "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" loading shared libraries: libaio.so.1: cannot "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("open")]),s._v(" shared object file: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" or directory\n\n解决："),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# yum install -y libaio-devel")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysqld --initialize --user=mysql --basedir=/application/mysql --datadir=/data/mysql/data")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-02-13T05:22:37.726244Z "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Note"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" A temporary password is generated "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root@localhost: "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("srV_"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("56")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("s4s\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("br"),s._v(" "),a("br"),s._v(" "),a("p",[a("strong",[s._v("无临时密码方式 初始化方式")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 /data/mysql/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# \\rm -rf /data/mysql/data/*")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@m01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysqld --initialize-insecure --user=mysql --basedir=/application/mysql --datadir=/data/mysql/data")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("数据库配置文件的编写")])]),s._v(" "),a("br"),s._v(" "),a("br"),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/my.cnf \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("basedir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datadir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/mysql/data\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("socket")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/mysql.sock\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server_id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("socket")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/mysql.sock\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("br"),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"_3-5-启动数据库："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-启动数据库："}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.5 启动数据库")]),s._v("：")]),s._v(" "),a("p",[s._v("两种方式启动：")]),s._v(" "),a("p",[a("strong",[s._v("1. sys-v")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 /etc/init.d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /application/mysql/support-files/mysql.server /etc/init.d/mysqld ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 /etc/init.d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# service mysqld restart")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("2. systemd")])]),s._v(" "),a("p",[s._v("注意： sysv方式启动过的话，需要先提前关闭，才能以下方式登录")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/etc/systemd/system/mysqld.service "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("EOF\n[Unit]\nDescription=MySQL Server\nDocumentation=man:mysqld(8)\nDocumentation=http://dev.mysql.com/doc/refman/en/using-systemd.html\nAfter=network.target\nAfter=syslog.target\n[Install]\nWantedBy=multi-user.target\n[Service]\nUser=mysql\nGroup=mysql\nExecStart=/application/mysql/bin/mysqld --defaults-file=/etc/my.cnf\nLimitNOFILE = 5000\nEOF")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("br"),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"_3-6-如何分析处理无法启动问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-如何分析处理无法启动问题"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.6 如何分析处理无法启动问题")])]),s._v(" "),a("p",[s._v("without updating PID 类似错误")]),s._v(" "),a("p",[a("strong",[s._v("查看日志：")])]),s._v(" "),a("p",[a("code",[s._v("/data/mysql/data/主机名.err")])]),s._v(" "),a("p",[a("strong",[s._v("[ERROR] 上下文")])]),s._v(" "),a("p",[a("strong",[s._v("可能情况：")])]),s._v(" "),a("p",[a("code",[s._v("/etc/my.cnf")]),s._v("  路径不对等")]),s._v(" "),a("p",[a("code",[s._v("/tmp/mysql.sock")]),s._v("文件修改过 或 删除过")]),s._v(" "),a("p",[s._v("数据目录权限不是 mysql")]),s._v(" "),a("img",{staticStyle:{zoom:"95%"},attrs:{src:"\\img\\day01-5.png",alt:"day01-5"}}),s._v(" "),a("p",[a("strong",[s._v("第二种排错方法：")])]),s._v(" "),a("p",[s._v("数据库启动不了直接使用命令行启动 ，会把启动过程打印到屏幕")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("/application/mysql/bin/mysql --defaults-file"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/my.cnf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-7-本地管理员密码的设定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-本地管理员密码的设定"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3.7 本地管理员密码的设定")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mysqladmin -uroot -p password xin123")]),s._v("\nEnter password: \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("管理员用户密码忘记了？")])]),s._v(" "),a("p",[s._v("临时性方法")]),s._v(" "),a("p",[a("code",[s._v("--skip-grant-tables 跳过授权表")])]),s._v(" "),a("p",[a("code",[s._v("--skip-networking 跳过远程登录")])]),s._v(" "),a("p",[a("strong",[s._v("关闭数据库")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# /etc/init.d/mysqld stop")]),s._v("\nShutting down MySQL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(" SUCCESS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("启动数据库到维护模式")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@db01 ~]# mysqld_safe --skip-grant-tables --skip-networking &\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("登录数据库内并修改密码")])]),s._v(" "),a("p",[a("strong",[s._v("第一种方法")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("authentication_string "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("；\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("userflush "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" root"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("strong",[s._v("第二种方法：")])]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[s._v("mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" root"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nERROR "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1290")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("HY000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": The MySQL server "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" running "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" the "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--skip-grant-tables option so it cannot execute this statement")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" flush "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("privileges")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" root"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v(" identified "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nQuery OK"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.01")]),s._v(" sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),s._v(" "),a("br"),s._v(" "),a("br"),s._v(" "),a("p",[a("strong",[s._v("关闭数据库，正常启动验证")])])])}),[],!1,null,null,null);t.default=e.exports}}]);