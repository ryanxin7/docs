(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{424:function(s,a,t){"use strict";t.r(a);var r=t(27),e=Object(r.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"体系结构及管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#体系结构及管理"}},[s._v("#")]),s._v(" 体系结构及管理")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#_1-mysql-c-s结构介绍"}},[s._v("1. MySQL C/S结构介绍")])]),t("li",[t("a",{attrs:{href:"#_2-mysql实例的构成"}},[s._v("2. MySQL实例的构成")])]),t("li",[t("a",{attrs:{href:"#_3-mysql中-mysqld-进程结构"}},[s._v("3. MySQL中 mysqld 进程结构")]),t("ul",[t("li",[t("a",{attrs:{href:"#_3-1-sql语句引入"}},[s._v("3.1 SQL语句引入")])]),t("li",[t("a",{attrs:{href:"#_3-2-连接层"}},[s._v("3.2 连接层")])]),t("li",[t("a",{attrs:{href:"#_3-3-sql层（在优化方面至关重要）"}},[s._v("3.3 SQL层（在优化方面至关重要）")])]),t("li",[t("a",{attrs:{href:"#_3-4-存储引擎层"}},[s._v("3.4 存储引擎层")])]),t("li",[t("a",{attrs:{href:"#_3-5-mysql逻辑存储结构"}},[s._v("3.5 MySQL逻辑存储结构")])]),t("li",[t("a",{attrs:{href:"#_3-6-mysql物理存储结构"}},[s._v("3.6 MySQL物理存储结构")])]),t("li",[t("a",{attrs:{href:"#_3-7-innodb-段-区-页概念"}},[s._v("3.7 innodb 段 区 页概念")])])])]),t("li",[t("a",{attrs:{href:"#_4-用户和权限管理"}},[s._v("4. 用户和权限管理")]),t("ul",[t("li",[t("a",{attrs:{href:"#_4-1作用"}},[s._v("4.1作用")])]),t("li",[t("a",{attrs:{href:"#_4-2-用户的定义"}},[s._v("4.2 用户的定义")])]),t("li",[t("a",{attrs:{href:"#_4-3-用户的操作"}},[s._v("4.3 用户的操作")])]),t("li",[t("a",{attrs:{href:"#_4-4-权限管理"}},[s._v("4.4 权限管理")])])])]),t("li",[t("a",{attrs:{href:"#_5-mysql的启动和关闭"}},[s._v("5. MySQL的启动和关闭")]),t("ul",[t("li",[t("a",{attrs:{href:"#_5-1-日常启停"}},[s._v("5.1 日常启停")])]),t("li",[t("a",{attrs:{href:"#_5-2-维护性的任务方式启动"}},[s._v("5.2 维护性的任务方式启动")])]),t("li",[t("a",{attrs:{href:"#_5-3-初始化配置"}},[s._v("5.3 初始化配置")])]),t("li",[t("a",{attrs:{href:"#_5-4-配置文件读取顺序"}},[s._v("5.4 配置文件读取顺序")])]),t("li",[t("a",{attrs:{href:"#_5-5-mysql的连接管理"}},[s._v("5.5 MySQL的连接管理")])])])]),t("li",[t("a",{attrs:{href:"#_6-多实例管理"}},[s._v("6. 多实例管理")]),t("ul",[t("li",[t("a",{attrs:{href:"#_6-1-准备环境"}},[s._v("6.1 准备环境")])]),t("li",[t("a",{attrs:{href:"#_6-2-初始化三套数据"}},[s._v("6.2 初始化三套数据")])]),t("li",[t("a",{attrs:{href:"#_6-3-systemd-命令管理多实例"}},[s._v("6.3 Systemd 命令管理多实例")])]),t("li",[t("a",{attrs:{href:"#_6-4-启动多实例"}},[s._v("6.4 启动多实例")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"_1-mysql-c-s结构介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysql-c-s结构介绍"}},[s._v("#")]),s._v(" 1. MySQL C/S结构介绍")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("两种连接方式：")])]),s._v(" "),t("p",[t("strong",[s._v("TCP/IP：")]),t("code",[s._v("mysql -uroot -xin123 -h 10.0.0.51 -P3306")])]),s._v(" "),t("p",[t("strong",[s._v("Socket：")]),t("code",[s._v("mysql -uroot -xin123 -S /tmp/mysql.sock")])]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_2-mysql实例的构成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-mysql实例的构成"}},[s._v("#")]),s._v(" 2. MySQL实例的构成")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("举例说明：")])]),s._v(" "),t("p",[t("strong",[s._v("公司：")]),s._v(" 老板 + 经理 + 员工 + 办公区")]),s._v(" "),t("p",[t("strong",[s._v("实例：")]),s._v(" mysqld + master thread + 干活的Thread + 预分配的内存")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_3-mysql中-mysqld-进程结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-mysql中-mysqld-进程结构"}},[s._v("#")]),s._v(" 3. MySQL中 mysqld 进程结构")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-1-sql语句引入"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-sql语句引入"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.1 SQL语句引入")])]),s._v(" "),t("p",[t("strong",[s._v("结构化的查询语言:")])]),s._v(" "),t("ul",[t("li",[s._v("DQL 数据查询语言")]),s._v(" "),t("li",[s._v("DDL 数据定义语言")]),s._v(" "),t("li",[s._v("DML 数据操作语言")]),s._v(" "),t("li",[s._v("DCL 数据控制语言")])]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-2-连接层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-连接层"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.2")]),s._v(" "),t("strong",[s._v("连接层")])]),s._v(" "),t("br"),s._v(" "),t("ol",[t("li",[t("strong",[s._v("提供连接协议")]),s._v(" (两种方式)")])]),s._v(" "),t("p",[s._v("​      Socket")]),s._v(" "),t("p",[s._v("​      TCPIP")]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[t("p",[s._v("验证用户名（"),t("code",[s._v("root@localhost")]),s._v("）密码合法性，进行匹配专门的授权表。")])]),s._v(" "),t("li",[t("p",[s._v("派生一个专用连接线程（接收SQL，返回结果）")])])]),s._v(" "),t("p",[s._v("​      使用命令  "),t("code",[s._v("mysql> show processlist;")]),s._v(" 查看")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("思考：")])]),s._v(" "),t("p",[t("strong",[s._v("忘记密码的参数在哪做的手脚？")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("--skip-grant-tables\n--skip-networking\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-3-sql层（在优化方面至关重要）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-sql层（在优化方面至关重要）"}},[s._v("#")]),s._v(" 3.3 SQL层（在优化方面至关重要）")]),s._v(" "),t("br"),s._v(" "),t("ul",[t("li",[s._v("验证SQL语法和SQL_MODE")]),s._v(" "),t("li",[s._v("验证语义")]),s._v(" "),t("li",[s._v("验证权限")]),s._v(" "),t("li",[s._v("解析器进行语句解析，生成执行计划（解析树）")]),s._v(" "),t("li",[s._v("优化器（各种算法，基于执行代价），根据算法，找到代价最低的执行计划。代价是指：CPU 磁盘 IO")]),s._v(" "),t("li",[s._v("执行器按照优化器选择执行计划，执行SQL语句，得出获取数据的方法。")]),s._v(" "),t("li",[s._v("提供query cache(默认不开)，一般不开，会用redis")]),s._v(" "),t("li",[s._v("记录操作日志（binlog），默认没开")])]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-4-存储引擎层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-存储引擎层"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.4")]),s._v(" "),t("strong",[s._v("存储引擎层")])]),s._v(" "),t("p",[t("strong",[s._v("真正和磁盘打交道的一个层次")])]),s._v(" "),t("p",[s._v("根据SQL层提供的取数据的方法，拿到数据，返回给SQL，结构化成表，再又连接层线程返回给用户。")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-5-mysql逻辑存储结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-mysql逻辑存储结构"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.5 MySQL逻辑存储结构")])]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("数据库逻辑结构与操作系统结构对照表：")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[t("img",{attrs:{width:"115/"}}),s._v("数据库逻辑结构"),t("img",{attrs:{width:"115/"}})]),s._v(" "),t("th",{staticStyle:{"text-align":"center"}},[t("img",{attrs:{width:"115/"}}),s._v("操作系统"),t("img",{attrs:{width:"115/"}})])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("库")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("Linux 目录")])]),s._v(" "),t("tr",[t("td",[s._v("create database wordpress charset utf8mb4;")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("mkdir /wordpress")])]),s._v(" "),t("tr",[t("td",[s._v("show databases;")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("ls /")])]),s._v(" "),t("tr",[t("td",[s._v("use wordpress;")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("cd /wordpress")])]),s._v(" "),t("tr",[t("td",[s._v("表")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("Linux 的文件")])]),s._v(" "),t("tr",[t("td",[s._v("列（字段）")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("无")])]),s._v(" "),t("tr",[t("td",[s._v("列属性")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("无")])]),s._v(" "),t("tr",[t("td",[s._v("数据行（记录）")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("Linux数据行")])]),s._v(" "),t("tr",[t("td",[s._v("表属性（元数据）")]),s._v(" "),t("td",{staticStyle:{"text-align":"center"}},[s._v("Linux 文件属性")])])])]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-6-mysql物理存储结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-mysql物理存储结构"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.6 MySQL物理存储结构")])]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("库：")]),s._v(" 使用文件系统上的目录来表示")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("表：")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("MyISAM(类似ext2)")]),t("br"),s._v("\nuser.frm ： 存储的表结构（列，列属性）"),t("br"),s._v("\nuser.MYD : 存储的数据记录"),t("br"),s._v("\nuser.MYI ： 存储索引"),t("br")])]),s._v(" "),t("br"),s._v(" "),t("ul",[t("li",[t("strong",[s._v("InnoDB(类似XFS)"),t("br")]),s._v("\ntime_zone.frm ： 存储的表结构（列，列属性）"),t("br"),s._v("\ntime_zone.ibd ： 存储的数据记录和索引"),t("br"),s._v("\nibdata1 : 数据字典信息"),t("br")])]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_3-7-innodb-段-区-页概念"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-innodb-段-区-页概念"}},[s._v("#")]),s._v(" "),t("strong",[s._v("3.7 innodb")]),s._v(" 段 区 页概念")]),s._v(" "),t("br"),s._v(" "),t("ul",[t("li",[s._v("一般情况下（非分区表）")]),s._v(" "),t("li",[s._v("一个表就是一个段")]),s._v(" "),t("li",[s._v("一个段由多个区构成")]),s._v(" "),t("li",[s._v("一个区在（16k），64个连续的页，1M大小")])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_4-用户和权限管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-用户和权限管理"}},[s._v("#")]),s._v(" 4. 用户和权限管理")]),s._v(" "),t("h3",{attrs:{id:"_4-1作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-1作用"}},[s._v("#")]),s._v(" 4.1作用")]),s._v(" "),t("br"),s._v(" "),t("ul",[t("li",[t("p",[s._v("登录MySQL")])]),s._v(" "),t("li",[t("p",[s._v("管理MySQL")]),s._v(" "),t("br")])]),s._v(" "),t("h3",{attrs:{id:"_4-2-用户的定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-用户的定义"}},[s._v("#")]),s._v(" "),t("strong",[s._v("4.2")]),s._v(" 用户的定义")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--用户名@'白名单'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'%'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'localhost'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'127.0.0.1'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.5%'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.0/255.255.254.0'")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.%'")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_4-3-用户的操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-用户的操作"}},[s._v("#")]),s._v(" 4.3 用户的操作")]),s._v(" "),t("h4",{attrs:{id:"_4-3-1-创建用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-1-创建用户"}},[s._v("#")]),s._v(" 4.3.1 创建用户")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("create")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" oldboy"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nQuery OK"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("rows")]),s._v(" affected "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.00")]),s._v(" sec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[t("strong",[s._v("说明：")])]),s._v(" "),t("p",[s._v("8.0以前，可以自动创建用户并授权")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" oldguo"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-3-2-查询用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-2-查询用户"}},[s._v("#")]),s._v(" 4.3.2 查询用户")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("host "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-3-3-修改用户密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-3-修改用户密码"}},[s._v("#")]),s._v(" 4.3.3 修改用户密码")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("alter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" oldguo"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-3-4-删除用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-4-删除用户"}},[s._v("#")]),s._v(" 4.3.4 删除用户")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("drop")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" oldguo"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_4-4-权限管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-权限管理"}},[s._v("#")]),s._v(" 4.4 权限管理")]),s._v(" "),t("h4",{attrs:{id:"_4-4-1-权限列表"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-1-权限列表"}},[s._v("#")]),s._v(" 4.4.1 权限列表")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALL")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DROP")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" RELOAD"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHUTDOWN")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" PROCESS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FILE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REFERENCES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DATABASES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" SUPER"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TEMPORARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LOCK")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLES")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("EXECUTE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLICATION")]),s._v(" SLAVE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REPLICATION")]),s._v(" CLIENT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SHOW")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VIEW")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROUTINE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ALTER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROUTINE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("USER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" EVENT"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRIGGER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLESPACE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--授权管理权限")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-4-2-授权命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-2-授权命令"}},[s._v("#")]),s._v(" 4.4.2 授权命令")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" oldguo"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" 权限 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" 作用目标 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" 用户 identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" 密码 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" wordpress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" \n \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 作用目标:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\nwordpress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" \nworpress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("t1 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-4-3-授权需求"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-3-授权需求"}},[s._v("#")]),s._v(" 4.4.3 授权需求")]),s._v(" "),t("br"),s._v(" "),t("ol",[t("li",[s._v("创建一个管理员用户root，可以通过10网段，管理数据库.")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("option")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("创建一个应用用户wordpress，可以通过10网段，wordpress库下的所有表进行 "),t("code",[s._v("SELECT,INSERT, UPDATE, DELETE")]),s._v(" 操作")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DELETE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" wordpress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" wordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-4-4-回收权限"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-4-回收权限"}},[s._v("#")]),s._v(" 4.4.4 回收权限")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" grants "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" wordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("revoke")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" wordpress"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wordpress'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" grants "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" wordpress"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("br"),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"_4-4-5-关于生产中开用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-5-关于生产中开用户"}},[s._v("#")]),s._v(" 4.4.5 关于生产中开用户")]),s._v(" "),t("br"),s._v(" "),t("p",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("如何沟通开用户")])])],1),s._v(" "),t("ul",[t("li",[s._v("是否有邮件批复")]),s._v(" "),t("li",[s._v("对哪些库和表做操作")]),s._v(" "),t("li",[s._v("做什么操作")]),s._v(" "),t("li",[s._v("从什么地址来登录")])]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[t("font",{attrs:{color:"red"}},[s._v("开发人员找你要root用户密码？")])],1)]),s._v(" "),t("ul",[t("li",[s._v("走流程拒绝他")]),s._v(" "),t("li",[s._v("如果是金融类的公司")])]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("ul",[t("li",[t("strong",[t("font",{attrs:{color:"red"}},[s._v("原则上是不允许任何非DBA人员持有或申请root")])],1)]),s._v(" "),t("li",[t("font",{attrs:{color:"red"}},[t("strong",[s._v("如果有人私下索要root密码，及时举报。")])])],1)]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_5-mysql的启动和关闭"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-mysql的启动和关闭"}},[s._v("#")]),s._v(" 5. MySQL的启动和关闭")]),s._v(" "),t("br"),s._v(" "),t("img",{attrs:{src:"\\img\\dba\\Section2-2-1.png",alt:"多种启动方式介绍",width:"85%",height:"85%"}}),s._v(" "),t("p",[t("strong",[s._v("把 mysql.server 拷贝到了 init.d下")])]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("img",{attrs:{src:"\\img\\dba\\Section2-2-2.png",alt:"启动脚本",width:"85%",height:"85%"}}),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_5-1-日常启停"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-日常启停"}},[s._v("#")]),s._v(" 5.1 日常启停")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("sys "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v 启动方式 mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("server "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("start")]),s._v(" 脚本   启动过程：调用"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---\x3e mysqld_safe ---\x3e启动实例 mysqld ")]),s._v("\nmysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("---\x3e mysqld 直接调用 mysqld 指定配置文件")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("br"),s._v(" "),t("img",{attrs:{src:"\\img\\dba\\Section2-2-3.png",alt:"调用mysqld",width:"85%",height:"85%"}}),s._v(" "),t("p",[s._v("需要依赖于 "),t("strong",[s._v("/etc/my.cnf")])]),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_5-2-维护性的任务方式启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-维护性的任务方式启动"}},[s._v("#")]),s._v(" 5.2 维护性的任务方式启动")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqld_safe "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--skip-grant-tables --skip-networking &")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("ul",[t("li",[t("p",[s._v("启动时在命令行临时加入命令。")])]),s._v(" "),t("li",[t("p",[s._v("我们一般会将我们需要的参数临时加到命令行。也会读取"),t("code",[s._v("/etc/my.cnf")]),s._v(" 的内容,但是如果冲突,命令行优先级最高。")]),s._v(" "),t("br"),s._v(" "),t("br")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" mysqld_safe "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n mysqladmin -uroot -p123 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shutdown")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_5-3-初始化配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-初始化配置"}},[s._v("#")]),s._v(" 5.3 初始化配置")]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"_5-3-1-作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-作用"}},[s._v("#")]),s._v(" 5.3.1 作用")]),s._v(" "),t("ul",[t("li",[s._v("影响数据库的启动")]),s._v(" "),t("li",[s._v("影响到客户端的功能")])]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"_5-3-2-初始化配置的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-2-初始化配置的方法"}},[s._v("#")]),s._v(" 5.3.2 初始化配置的方法")]),s._v(" "),t("br"),s._v(" "),t("ul",[t("li",[s._v("初始化配置文件(例如"),t("code",[s._v("/etc/my.cnf")]),s._v(")")]),s._v(" "),t("li",[s._v("启动命令行上进行设置(例如:"),t("code",[s._v("mysqld_safe mysqld")]),s._v(")")]),s._v(" "),t("li",[s._v("预编译时设置(仅限于编译安装时设置)\n"),t("br")])]),s._v(" "),t("h4",{attrs:{id:"_5-2-3-初始化配置文件的书写格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-3-初始化配置文件的书写格式"}},[s._v("#")]),s._v(" 5.2.3 初始化配置文件的书写格式")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("标签"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("xxx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("标签"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("xxx")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("xxx\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_5-2-4-配置文件标签的归类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-4-配置文件标签的归类"}},[s._v("#")]),s._v(" 5.2.4 配置文件标签的归类")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-yml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("服务器端")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld_safe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("server"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n \n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("客户端")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqladmin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_5-2-5-配置文件设置样板（5-7版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-5-配置文件设置样板（5-7版本"}},[s._v("#")]),s._v(" 5.2.5 配置文件设置样板（5.7版本)")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("服务器端配置")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#软件安装目录        ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("basedir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#数据路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datadir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/mysql/data \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#socket文件位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("socket")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/mysql.sock\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#服务器id号 用于主备")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server_id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口号")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("br"),s._v(" "),t("p",[t("strong",[s._v("客户端配置")])]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#socket文件位置")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("socket")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/tmp/mysql.sock\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_5-4-配置文件读取顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-配置文件读取顺序"}},[s._v("#")]),s._v(" 5.4 配置文件读取顺序")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysqld "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--help --verbose |grep my.cnf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("p",[t("strong",[s._v("强制使用自定义配置文件")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--defautls-file ")]),s._v("\nmysqld_safe "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("--defaults-file=/tmp/aa.txt &")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_5-5-mysql的连接管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-mysql的连接管理"}},[s._v("#")]),s._v(" 5.5 MySQL的连接管理")]),s._v(" "),t("br"),s._v(" "),t("h4",{attrs:{id:"_5-5-1-mysql-命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-1-mysql-命令"}},[s._v("#")]),s._v(" 5.5.1 mysql 命令")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("注意:提前应该将用户授权做好")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("grant")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("all")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("on")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" root"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@'10.0.0.%'")]),s._v(" identified "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nTCPIP :\nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("h "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v(".51")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("P3306 \nSocket \nmysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("uroot "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("p "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("S "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("tmp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("show")]),s._v(" processlist"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 查看登录情况\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("br"),s._v(" "),t("h4",{attrs:{id:"_5-5-2-客户端工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-2-客户端工具"}},[s._v("#")]),s._v(" 5.5.2 客户端工具")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("sqlyog")])]),s._v(" "),t("li",[t("strong",[s._v("navicat")])])]),s._v(" "),t("img",{attrs:{src:"\\img\\dba\\Section2-2-4.png",alt:"客户端工具",width:"85%",height:"85%"}}),s._v(" "),t("br"),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"_6-多实例管理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-多实例管理"}},[s._v("#")]),s._v(" 6. 多实例管理")]),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_6-1-准备环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-准备环境"}},[s._v("#")]),s._v(" 6.1 准备环境")]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("准备多个目录")])]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /data/330"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7,8")]),s._v(",9"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("/data\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("p",[t("strong",[s._v("准备多个配置文件")])]),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[t("font",{attrs:{color:"#E74C3C"}},[s._v("实例一配置文件")])],1)]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[s._v("cat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nbasedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql\n\ndatadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n\nsocket"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n\nlog_error"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\nport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v("\n\nserver_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\n\nlog_bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin\n\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("br"),s._v(" "),t("p",[t("strong",[t("font",{attrs:{color:"#3498DB"}},[s._v("实例二配置文件")])],1)]),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[s._v("cat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3308")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nbasedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql\n\ndatadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3308")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n\nsocket"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3308")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n\nlog_error"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3308")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\nport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3308")]),s._v("\n\nserver_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n\nlog_bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3308")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin\n\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br")])]),t("br"),s._v(" "),t("p",[t("font",{attrs:{color:"#27AE60"}},[t("strong",[s._v("实例三配置文件")])])],1),s._v(" "),t("div",{staticClass:"language-php line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-php"}},[t("code",[s._v("实例三配置文件 \n\ncat "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("my"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\nbasedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("application"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql\n\ndatadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data\n\nsocket"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sock\n\nlog_error"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\n\nport"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),s._v("\n\nserver_id"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("\n\nlog_bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("bin\n\n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br")])]),t("br"),s._v(" "),t("br"),s._v(" "),t("h3",{attrs:{id:"_6-2-初始化三套数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-初始化三套数据"}},[s._v("#")]),s._v(" 6.2 初始化三套数据")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/my.cnf /etc/my.cnf.bak\nmysqld --initialize-insecure --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3307/data --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql\nmysqld --initialize-insecure --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3308/data --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql\nmysqld --initialize-insecure --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql --datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3309/data --basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_6-3-systemd-命令管理多实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-systemd-命令管理多实例"}},[s._v("#")]),s._v(" 6.3 Systemd 命令管理多实例")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /etc/systemd/system\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" mysqld.service mysqld3307.service\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" mysqld.service mysqld3308.service\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" mysqld.service mysqld3309.service\n\n \n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mysqld3307.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为:")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3307/my.cnf\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mysqld3308.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为:")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3308/my.cnf\n\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" mysqld3309.service\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改为:")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3309/my.cnf\n\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "ExecStart" mysqld3309.service')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3309/my.cnf\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "ExecStart" mysqld3308.service')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3308/my.cnf\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@db01 system"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# grep "ExecStart" mysqld3307.service')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/application/mysql/bin/mysqld --defaults-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/data/3307/my.cnf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br")])]),t("br"),s._v(" "),t("p",[t("strong",[s._v("对目录授权")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql.mysql /data/\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("br"),s._v(" "),t("h3",{attrs:{id:"_6-4-启动多实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-启动多实例"}},[s._v("#")]),s._v(" 6.4 启动多实例")]),s._v(" "),t("br"),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("systemctl start mysqld3307.service\nsystemctl start mysqld3308.service\nsystemctl start mysqld3309.service\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("br"),s._v(" "),t("br"),s._v(" "),t("p",[t("strong",[s._v("验证多实例")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("netstat")]),s._v(" -lnp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("330")]),s._v("\n\nmysql -S /data/3307/mysql.sock -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"select @@server_id"')]),s._v("\nmysql -S /data/3308/mysql.sock -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"select @@server_id"')]),s._v("\nmysql -S /data/3309/mysql.sock -e "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"select @@server_id"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);